<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุตุฉ ุงูุงุฎุชุจุงุฑุงุช ุงูุฐูููุฉ ูุงูุดุฎุตูุฉ</title>
    <!-- ุชุถููู Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ุงุณุชุฎุฏุงู ุฎุท ุนุฑุจู ูุฑูุญ ูููุฑุงุกุฉ */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap');
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f0f4f8; /* ุฎูููุฉ ุณูุงููุฉ ูุงุชุญุฉ ููุงุฏุฆุฉ */
        }
        /* ุชุตููู ุงูุฃุฒุฑุงุฑ ูุงูุงุฎุชูุงุฑุงุช */
        .quiz-option, .mode-button {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .mode-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .quiz-option.selected {
            border-color: #10b981; /* ุฃุฎุถุฑ ูุงุชุญ ูููุฎุชุงุฑ */
            background-color: #ecfdf5; /* ุฎูููุฉ ุฎุถุฑุงุก ูุงุชุญุฉ ุฌุฏุงู */
            border-width: 2px;
            font-weight: 600;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
            display: inline-block;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        /* ูุฅุฎูุงุก ุดุฑูุท ุงูุชูุฑูุฑ ูู ูุถุน ุงูุฑูุงุถูุงุช */
        #math-answer::-webkit-outer-spin-button,
        #math-answer::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        #math-answer {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen flex items-center justify-center">

    <div id="app-container" class="w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-8 sm:p-10 border border-gray-100">

        <h1 id="main-header" class="text-3xl font-bold text-gray-800 text-center mb-8">ููุตุฉ ุงูุงุฎุชุจุงุฑุงุช ุงูุฐูููุฉ ูุงูุดุฎุตูุฉ</h1>

        <!-- 1. ุดุงุดุฉ ุงูุงุฎุชูุงุฑ ุงูุฑุฆูุณูุฉ -->
        <div id="selection-screen">
            <p class="text-gray-600 text-lg text-center mb-8">ุงุฎุชุฑ ููุน ุงูุชุญุฏู ุงูุฐู ุชูุฏ ุฃู ุชุจุฏุฃ ุจู:</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <!-- ุฒุฑ ุงุฎุชุจุงุฑ ุงูุดุฎุตูุฉ -->
                <button onclick="startTest('personality')" class="mode-button bg-blue-500 text-white p-6 rounded-xl text-lg font-semibold hover:bg-blue-600">
                    <span class="text-3xl mb-2 block">๐ง</span>
                    ุงุฎุชุจุงุฑ ุงูุดุฎุตูุฉ
                    <p class="text-sm opacity-90 mt-1">(10 ุฃุณุฆูุฉ ุนุดูุงุฆูุฉ)</p>
                </button>

                <!-- ุฒุฑ ุงุฎุชุจุงุฑ ุงูุฐูุงุก -->
                <button onclick="startTest('iq')" class="mode-button bg-purple-500 text-white p-6 rounded-xl text-lg font-semibold hover:bg-purple-600">
                    <span class="text-3xl mb-2 block">๐ก</span>
                    ุงุฎุชุจุงุฑ ุงูุฐูุงุก (IQ)
                    <p class="text-sm opacity-90 mt-1">(12 ุณุคุงู ููุทูู)</p>
                </button>

                <!-- ุฒุฑ ูุณุงุจูุฉ ุงููุฏุฑุงุช ุงูุฐูููุฉ -->
                <button onclick="startTest('math')" class="mode-button bg-teal-500 text-white p-6 rounded-xl text-lg font-semibold hover:bg-teal-600">
                    <span class="text-3xl mb-2 block">โฑ๏ธ</span>
                    ูุณุงุจูุฉ ุงูุณุฑุนุฉ (ุฑูุงุถูุงุช)
                    <p class="text-sm opacity-90 mt-1">(12 ุณุคุงู ูู 60 ุซุงููุฉ)</p>
                </button>

            </div>
        </div>

        <!-- 2. ุดุงุดุฉ ุงูุงุฎุชุจุงุฑ (ูุฎููุฉุ ุชูุณุชุฎุฏู ูุฌููุน ุงูุฃููุงุท) -->
        <div id="quiz-screen" class="hidden">
            <!-- ูุคุดุฑ ุงูููุช ูุงูุชูุฏู -->
            <div class="flex justify-between items-center mb-6">
                <div id="timer-display" class="text-xl font-bold text-red-600 hidden">ุงูุฒูู: <span id="time-left">60</span> ุซุงููุฉ</div>
                <div id="progress-bar-container" class="w-full bg-gray-200 rounded-full h-3">
                    <div id="progress-bar" class="bg-indigo-500 h-3 rounded-full transition-all duration-500 ease-in-out" style="width: 0%;"></div>
                </div>
                <p id="question-counter" class="text-md font-semibold text-gray-600 mr-4 whitespace-nowrap">ุงูุณุคุงู 1 ูู 12</p>
            </div>
            
            <div id="question-container">
                <!-- ูุญุชูู ุงูุณุคุงู ูุถุงู ููุง ุจูุงุณุทุฉ JavaScript -->
            </div>
            
            <div class="flex justify-between mt-8 pt-4 border-t border-gray-100">
                <button id="prev-button" onclick="previousQuestion()" disabled class="py-3 px-6 bg-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-400 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-md">
                    <span class="text-xl">โ</span> ุงูุณุงุจู
                </button>
                <button id="next-button" onclick="nextQuestion()" disabled class="py-3 px-6 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-md transform hover:scale-[1.03]">
                    ุงูุชุงูู <span class="text-xl">โ</span>
                </button>
            </div>
        </div>

        <!-- 3. ุดุงุดุฉ ุงููุชุงุฆุฌ (ูุฎููุฉ) -->
        <div id="result-screen" class="hidden text-center">
            <h2 class="text-3xl font-bold text-green-600 mb-4">ูุชูุฌุชู ุงูููุงุฆูุฉ!</h2>
            
            <!-- ุฑุณุงูุฉ ุชุญููุฒูุฉ -->
            <p id="motivational-message" class="text-xl font-medium text-gray-700 mb-6"></p>

            <div id="results-summary" class="space-y-6 text-right">
                <!-- ูุชู ููุคูุง ุจููุฎุต ุงููุชุงุฆุฌ -->
            </div>

            <!-- ููุงู ุชุญููู Gemini (ูุฎูู ูุจุฏุฆูุงู) -->
            <div id="gemini-analysis-area" class="mt-8 pt-6 border-t border-gray-200 hidden">
                <button id="gemini-analysis-button" 
                        class="w-full py-3 px-6 bg-blue-600 text-white font-bold text-lg rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg mb-4">
                    ุชุญููู Gemini ุงููุชุนูู ููุดุฎุตูุฉ โจ
                </button>
                <div id="analysis-output" class="text-left bg-blue-50 p-6 rounded-xl border border-blue-200 text-gray-700 leading-relaxed min-h-[50px]">
                    <!-- ุงููุชูุฌุฉ ุฃู ูุคุดุฑ ุงูุชุญููู ููุง -->
                </div>
            </div>
            
            <!-- ููุทูุฉ ุชุตููุฑ ุงููุชูุฌุฉ (ููุงุฎุชุจุงุฑูู: ุงูุดุฎุตูุฉ ูุงูุฐูุงุก) -->
            <div id="share-image-area" class="mt-8 text-center hidden">
                <canvas id="result-canvas" width="600" height="400" class="border border-gray-300 rounded-xl shadow-lg mx-auto mb-4"></canvas>
                <button id="download-button" onclick="downloadResultImage()" class="py-3 px-6 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700 transition duration-300 shadow-md">
                    <span class="text-xl">โฌ๏ธ</span> ุชุญููู ุตูุฑุฉ ุงููุชูุฌุฉ
                </button>
            </div>


            <button onclick="showSelectionScreen()" class="w-full mt-10 py-4 px-6 bg-gray-500 text-white font-bold text-lg rounded-xl hover:bg-gray-600 transition duration-300 shadow-lg">
                ุงูุนูุฏุฉ ูุดุงุดุฉ ุงูุงุฎุชูุงุฑ
            </button>
        </div>
    </div>

    <script>
        // ===================================================================
        // 0. ุฅุนุฏุงุฏุงุช API ููุธุงุฆู ุงููุณุงุนุฏุฉ
        // ===================================================================

        // ููุชุงุญ ุงูู API ูุฒูุฏ ุจู ุงูุจูุฆุฉุ ูุฐูู ูุชุฑูู ูุงุฑุบุงู
        const apiKey = ""; 
        const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent";
        
        // ูุธููุฉ ูุณุงุนุฏุฉ ูุชูููุฐ ุทูุจ API ูุน ุฅุนุงุฏุฉ ุงููุญุงููุฉ (Exponential Backoff)
        async function fetchWithRetry(url, options, retries = 3) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.ok) {
                        return response;
                    }
                    if (response.status === 429 && i < retries - 1) { // Too Many Requests
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        console.warn(`Rate limit exceeded (Attempt ${i + 1}/${retries}). Retrying in ${delay / 1000}s...`);
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    // ุฅุฐุง ูู ุชูู 429 ุฃู ูุงูุช ุงููุญุงููุฉ ุงูุฃุฎูุฑุฉุ ุฃุทูู ุงูุฎุทุฃ
                    throw new Error(`API error: ${response.status} ${response.statusText}`);
                } catch (error) {
                    if (i === retries - 1) {
                        throw error;
                    }
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    console.error(`Fetch error (Attempt ${i + 1}/${retries}). Retrying in ${delay / 1000}s...`, error.message);
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        // ===================================================================
        // 1. ุงูุจูุงูุงุช ุงูุนุงูููุฉ ูุงูุญุงูุฉ
        // ===================================================================

        let appState = {
            mode: null,              
            currentQuestionIndex: 0,
            currentQuizData: [],     
            userAnswers: [],         
            timer: null,             
            score: 0,
            startTime: 0,
            iqEndTime: 0,            
            personalityScores: {},
            lastIqScore: null,     // ูุชุฎุฒูู ูุชูุฌุฉ IQ ููุฑุณู
            lastPersonalityFileName: 'ูุชูุฌุฉ_ุงุฎุชุจุงุฑ_ุงูุดุฎุตูุฉ.png' // ูุชุญุฏูุฏ ุงุณู ุงูููู
        };

        const elements = {
            selection: document.getElementById('selection-screen'),
            quiz: document.getElementById('quiz-screen'),
            result: document.getElementById('result-screen'),
            header: document.getElementById('main-header'),
            questionContainer: document.getElementById('question-container'),
            nextButton: document.getElementById('next-button'),
            prevButton: document.getElementById('prev-button'),
            progressBar: document.getElementById('progress-bar'),
            questionCounter: document.getElementById('question-counter'),
            timerDisplay: document.getElementById('timer-display'),
            timeLeft: document.getElementById('time-left'),
            resultsSummary: document.getElementById('results-summary'),
            geminiAnalysisArea: document.getElementById('gemini-analysis-area'),
            geminiAnalysisButton: document.getElementById('gemini-analysis-button'),
            analysisOutput: document.getElementById('analysis-output'),
            motivationalMessage: document.getElementById('motivational-message'),
            shareImageArea: document.getElementById('share-image-area'),
            resultCanvas: document.getElementById('result-canvas'),
        };

        const motivationalMessages = {
            personality: [
                "ุชุฐูุฑุ ุดุฎุตูุชู ูู ุจุตูุชู ุงููุฑูุฏุฉ ูู ูุฐุง ุงูุนุงูู. ุฃูุช ุงุณุชุซูุงุฆู!",
                "ุงูุชุดุงู ุงูุฐุงุช ุฑุญูุฉ ูุณุชูุฑุฉ. ูุชุงุฆุฌู ุงูููู ูู ููุทุฉ ุงูุทูุงู ูููู ุงูุบุฏ.",
                "ูุง ุชูุฌุฏ ุดุฎุตูุฉ 'ุตุญูุญุฉ'. ุงุญุชุถู ููุงุท ููุชู ูุงุจุฏุฃ ุงูุนูู ุนูู ุชุญุฏูุงุชู."
            ],
            iq: [
                "ูุชุงุฆุฌู ุชุนูุณ ูุฏุฑุฉ ุนุธููุฉ ุนูู ุงูุชูููุฑ. ุงุณุชูุฑ ูู ุชุญุฏู ุนููู!",
                "ุงูุฐูุงุก ููุณ ุฑููุงูุ ุจู ูู ุทุฑููุฉ ุชูููุฑ. ููุชุงุฆุฌู ุฑุงุฆุนุฉ ุญูุงู.",
                "ุจูุฒูุฏ ูู ุงูุชูุฑููุ ุณุชุฒุฏุงุฏ ุญุฏุฉ ูุชุฑููุฒุงู. ุฃูุช ุนูู ุงูุทุฑูู ุงูุตุญูุญ."
            ],
            math: [
                "ุณุฑุนุฉ ุงูุฅูุฌุงุฒ ูุฏูู ูุฐููุฉ! ุงูุนูู ุงููุฏุฑุจ ูู ุฃููู ุฃุฏุงุฉ.",
                "ูุชุงุฆุฌู ูู ุงููุฏุฑุงุช ุงูุฐูููุฉ ุชูุชุญ ูู ุฃุจูุงุจุงู ุนุฏูุฏุฉ. ุงุณุชุบููุง!",
                "ุชุญุฏูุช ููุณู ููุฒุช. ุงุญุชูู ุจูุฐุง ุงูุฅูุฌุงุฒ ูุงุณุชุนุฏ ูููุฒูุฏ ูู ุงูุชุญุฏูุงุช."
            ]
        };

        const NUM_PERSONALITY_QUESTIONS = 10;
        const NUM_IQ_QUESTIONS = 12; 
        const NUM_MATH_QUESTIONS = 12; 

        // ===================================================================
        // 2. ูุญุชูู ุงูุฃุณุฆูุฉ (Personality, IQ, Math)
        // ===================================================================

        // ** ุฃุณุฆูุฉ ุงูุดุฎุตูุฉ (ุชู ุงูุงุญุชูุงุธ ุจู 6 ุฃุณุฆูุฉ ููู ุณูุฉ) **
        const personalityPool = {
            'T1': [ 
                { q: "ุนูุฏูุง ุชูุชูู ุจุฃุดุฎุงุต ุฌุฏุฏุ ูู ุชููู ุฅูู:", options: [{ text: "ุงูุงูุชุธุงุฑ ุญุชู ูุชุญุฏุซูุง ุฅููู.", points: 0 }, { text: "ุชูุฏูู ููุณู ูุฃุดุฎุงุต ูุญุฏุฏูู ููุท.", points: 1 }, { text: "ุงูุงูุถูุงู ุฅูู ูุญุงุฏุซุฉ ูุงุฆูุฉ.", points: 2 }, { text: "ุงูุจุฏุก ุจูุญุงุฏุซุฉ ูุน ุฃู ุดุฎุต ุจุฌูุงุฑู.", points: 3 }] },
                { q: "ุจุนุฏ ููู ุนูู ุทูููุ ูู ุชุดุนุฑ ุจุฃูู ุจุญุงุฌุฉ ุฅูู:", options: [{ text: "ุงููุฏูุก ุงูุชุงู ูุฅุนุงุฏุฉ ุดุญู ุทุงูุชู.", points: 0 }, { text: "ุชูุงุตู ูุตูุฑ ููุฑูุญ ูุน ุดุฑูู ุฃู ุตุฏูู.", points: 1 }, { text: "ุงูุฎุฑูุฌ ูููุงุจูุฉ ูุฌููุนุฉ ูู ุงูุฒููุงุก.", points: 2 }, { text: "ุฃูุดุทุฉ ุฑูุงุถูุฉ ุฌูุงุนูุฉ ุฃู ุงุฌุชูุงุนูุฉ ููุซูุฉ.", points: 3 }] },
                { q: "ูู ุชูุถู ุจูุฆุฉ ุงูุนูู ุงูููุชูุญุฉ (Open-Office) ุฃู ุงูููุชุจ ุงูุฎุงุตุ", options: [{ text: "ุงูููุชุจ ุงูุฎุงุตุ ูุฒูุงุฏุฉ ุงูุชุฑููุฒ.", points: 0 }, { text: "ุงูููุชุจ ุงูุฎุงุตุ ููู ูุน ุฅููุงููุฉ ุงูุชูุงุนู.", points: 1 }, { text: "ุงูุจูุฆุฉ ุงูููุชูุญุฉุ ูููู ูุน ุณูุงุนุงุช ุฑุฃุณ.", points: 2 }, { text: "ุงูุจูุฆุฉ ุงูููุชูุญุฉุ ุฃุญุจ ุงูุชูุงุนู ุงููุณุชูุฑ.", points: 3 }] },
                { q: "ุฅุฐุง ุฑุจุญุช ุฌุงุฆุฒุฉุ ูู ุชูุถู ุฅุนูุงู ุงูุฎุจุฑ ุฃู ุงูุงุญุชูุงุธ ุจูุ", options: [{ text: "ุงูุงุญุชูุงุธ ุจู ูููุณู ุฃู ุงูููุฑุจูู ุฌุฏุงู.", points: 0 }, { text: "ุฅุฎุจุงุฑ ุงูุนุงุฆูุฉ ูุงูุฃุตุฏูุงุก ุงูููุฑุจูู.", points: 1 }, { text: "ุฅุนูุงูู ุนูู ุดุจูุงุช ุงูุชูุงุตู ุงูุงุฌุชูุงุนู.", points: 2 }, { text: "ุฅูุงูุฉ ุญูู ููุงุญุชูุงู ุจู ูุน ุงูุฌููุน.", points: 3 }] },
                { q: "ุนูุฏูุง ุชุฐูุจ ุฅูู ููุงู ุฌุฏูุฏุ ูู ุชุจุฏุฃ ุงููุญุงุฏุซุงุช ุจุณุฑุนุฉุ", options: [{ text: "ุฃุจุฏุงู", points: 0 }, { text: "ุฃุญูุงูุงู", points: 1 }, { text: "ุบุงูุจุงู", points: 2 }, { text: "ูุนูุ ุฏุงุฆูุงู", points: 3 }] },
                { q: "ูุง ูู ุดุนูุฑู ุชุฌุงู ุงูุชุญุฏุซ ุฃูุงู ุญุดุฏ ูุจูุฑุ", options: [{ text: "ุฑุนุจ ุชุงูุ ุฃุชุฌูุจู ุจุฃู ุซูู.", points: 0 }, { text: "ุชูุชุฑ ุฎูููุ ููููู ุฃูุถูู ุฅุฑุณุงู ุจุฑูุฏ ุฅููุชุฑููู.", points: 1 }, { text: "ุจุนุถ ุงููููุ ููููู ูุซูุฑ ูููุชุน.", points: 2 }, { text: "ุฃุณุชูุชุน ุจูุ ุฅูู ูุฑุตุฉ ููุธููุฑ.", points: 3 }] }
            ],
            'T2': [ 
                { q: "ูุง ูู ุดุนูุฑู ุชุฌุงู ุชุบููุฑ ุฑูุชููู ุงููููู ุจุงููุงููุ", options: [{ text: "ุฅุญุณุงุณ ูุฒุนุฌ ุจุงูุถูุงุน ูุงูุชูุชุฑ.", points: 0 }, { text: "ููุงููุ ููููู ุฃุณุชุทูุน ุงูุชุฃููู ุฅุฐุง ุงุถุทุฑุฑุช.", points: 1 }, { text: "ุฃูุฑ ุฌูุฏ ููุฑุญุจ ุจู ุจูู ุงูุญูู ูุงูุขุฎุฑ.", points: 2 }, { text: "ูุซูุฑ ููุญูุฒุ ุฃุญุจ ุงูุชุฌุงุฑุจ ุงูุฌุฏูุฏุฉ.", points: 3 }] },
                { q: "ูู ุชุจุญุซ ุจูุดุงุท ุนู ูุนูููุงุช ุชุชุนุงุฑุถ ูุน ูุนุชูุฏุงุชูุ", options: [{ text: "ูุงุฏุฑุงู ุฌุฏุงูุ ุฃุฎุดู ุงูุงุถุทุฑุงุจ ุงููุนุฑูู.", points: 0 }, { text: "ูุง ุฃุจุญุซุ ููู ุฃุชูุจููุง ุฅุฐุง ุธูุฑุช ุฃูุงูู.", points: 1 }, { text: "ุฃุญูุงูุงูุ ูููู ูุฌูุงุช ุงููุธุฑ ุงูุฃุฎุฑู.", points: 2 }, { text: "ูุนูุ ุฃุฌุฏ ูุชุนุฉ ูู ุชุญุฏู ุฃููุงุฑู.", points: 3 }] },
                { q: "ูู ุชุญุจ ุงูุณูุฑ ุฅูู ูุฌูุงุช ุบุฑูุจุฉ ูุบูุฑ ูุนุฑููุฉุ", options: [{ text: "ูุงุ ุฃูุถูู ุงูุฃูุงูู ุงููุฃูููุฉ ูุงูุขููุฉ.", points: 0 }, { text: "ุฅุฐุง ูุงูุช ุจุฑููุฉ ููุธููู ููุซูู ุจูู.", points: 1 }, { text: "ูุนูุ ุฃุญูุงูุงู ุฃุณุชูุชุน ุจุงูุฎุฑูุฌ ุนู ุงููุฃููู.", points: 2 }, { text: "ุจุงูุชุฃููุฏุ ุงููุบุงูุฑุฉ ูู ุงููุฌููู ุถุฑูุฑูุฉ.", points: 3 }] },
                { q: "ูุง ุฑุฃูู ูู ุงูุฃููุงู ุงููููุฉ ุงููุฌุฑุฏุฉ ูุบูุฑ ุงูุชูููุฏูุฉุ", options: [{ text: "ูุถูุนุฉ ููููุชุ ุฃูุถูู ุงููุตุต ุงููุงุถุญุฉ.", points: 0 }, { text: "ูููุฉุ ูุง ุฃุฑู ุฃู ูุนูู ููุง.", points: 1 }, { text: "ูุฏ ุชููู ููุชุนุฉ ุฅุฐุง ูุงูุช ุฐุงุช ุฌูุฏุฉ ุนุงููุฉ.", points: 2 }, { text: "ุฃุญุจูุงุ ุชุญูุฒ ุงูุชูููุฑ ูุชุซูุฑ ุงูุฌุฏู.", points: 3 }] },
                { q: "ูู ุชูุถู ุฃู ูุตูู ุงููุงุณ ุจุฃูู 'ูุจุฏุน' ุฃู 'ููุซูู'ุ", options: [{ text: "ููุซููุ ุงูููุซูููุฉ ุฃูู ุตูุฉ.", points: 0 }, { text: "ููุซููุ ููู ูุน ููุณุฉ ูู ุงูุฐูุงุก.", points: 1 }, { text: "ูุจุฏุนุ ุฃูุถูู ุฃู ุฃุชุฐูุฑ ุจุฃููุงุฑู.", points: 2 }, { text: "ูุจุฏุนุ ุงูุฅุจุฏุงุน ูู ุงููููุฉ ุงูุนููุง.", points: 3 }] },
                { q: "ููู ุชุชุนุงูู ูุน ุงุณุชุฎุฏุงู ุชูููููุฌูุง ุฃู ุจุฑุงูุฌ ุฌุฏูุฏุฉ ููุนูุฏุฉุ", options: [{ text: "ุฃูุชุธุฑ ุญุชู ุชุตุจุญ ุดุงุฆุนุฉ ุฃู ุถุฑูุฑูุฉ.", points: 0 }, { text: "ุฃุทูุจ ูู ุดุฎุต ุฃู ูุนูููู ุฃุณุงุณูุงุชูุง.", points: 1 }, { text: "ุฃุญุงูู ุงุณุชูุดุงููุง ุจููุณู ุฅุฐุง ูุงู ูุฏู ููุช.", points: 2 }, { text: "ุฃุบูุต ูููุง ููุฑุงู ูุฃููู ููู ุชุนูู.", points: 3 }] }
            ],
            'T3': [ 
                { q: "ููู ุชูุธู ููุงูู ุงูููููุฉุ", options: [{ text: "ุฃุนุชูุฏ ุนูู ุฐุงูุฑุชูุ ุฃุนูู ุนูู ูุง ูุชุฐูุฑู ุนููู.", points: 0 }, { text: "ุฃุณุชุฎุฏู ููุงุฆู ููุงู ุจุณูุทุฉ ุบูุฑ ููุธูุฉ.", points: 1 }, { text: "ูุฏู ุฌุฏูู ุฒููู ุฃู ุชูููู ููุธู.", points: 2 }, { text: "ุฃุฎุทุท ููู ุฏูููุฉ ูู ุฌุฏูู ุฒููู ุฏููู.", points: 3 }] },
                { q: "ูุง ูู ุดุนูุฑู ุนูุฏ ุงูุนูู ูู ุจูุฆุฉ ููุถููุฉุ", options: [{ text: "ูุง ููููู ูุซูุฑุงูุ ุจู ุฃุญูุงูุงู ุฃุณุชูุชุน ุจูุง.", points: 0 }, { text: "ุฃุณุชุทูุน ุงูุนููุ ููููู ุฃูุถู ุงููุธุงู ููููุงู.", points: 1 }, { text: "ุฃุดุนุฑ ุจุนุฏู ุงูุงุฑุชูุงุญ ูุฃุญุงูู ุชุฑุชูุจ ูุณุงุญุชู.", points: 2 }, { text: "ูุง ูููููู ุงูุชุฑููุฒุ ูุฌุจ ุฃู ูููู ูู ุดูุก ูุซุงููุงู.", points: 3 }] },
                { q: "ูู ุชุชุฑู ุนููุงู ุบูุฑ ููุชูู ูุชุจุฏุฃ ูู ูุดุฑูุน ุฌุฏูุฏุ", options: [{ text: "ูุนูุ ูู ูุซูุฑ ูู ุงูุฃุญูุงู.", points: 0 }, { text: "ุฃุญูุงูุงูุ ุนูุฏูุง ุฃููุฏ ุงูุงูุชูุงู.", points: 1 }, { text: "ูุงุฏุฑุงูุ ุฃูุฑู ุฃู ุฃุชุฑู ุงูุฃููุฑ ูุนููุฉ.", points: 2 }, { text: "ูุณุชุญููุ ูุฌุจ ุฅููุงุก ุงููุดุฑูุน ูุจู ุงูุจุฏุก ุจุบูุฑู.", points: 3 }] },
                { q: "ููู ุชุชุนุงูู ูุน ูููุฉ ูููุฉ ูููููุง ุถุฑูุฑูุฉุ", options: [{ text: "ุฃุคุฌููุง ุญุชู ุงููุญุธุฉ ุงูุฃุฎูุฑุฉ.", points: 0 }, { text: "ุฃูุณููุง ุฅูู ุฃุฌุฒุงุก ุตุบูุฑุฉ ูุฃุญุงูู ุฅููุงุฆูุง.", points: 1 }, { text: "ุฃูุฌุฒูุง ุนูู ุงูููุฑ ููุชุฎูุต ูููุง.", points: 2 }, { text: "ุฃุฏูุฌูุง ูู ุฑูุชููู ุงููููู ูุถูุงู ุฅูุฌุงุฒูุง.", points: 3 }] },
                { q: "ูู ุชููู ุจุชูุธูู ููุชุจู ููุณุญ ูููุงุชู ุงูุฑูููุฉ ุจุดูู ุฏูุฑูุ", options: [{ text: "ูุงุ ุฃุจุฏุงู ุชูุฑูุจุงู.", points: 0 }, { text: "ุนูุฏูุง ูุตุจุญ ุงูุฃูุฑ ููุถููุงู ุฌุฏุงู.", points: 1 }, { text: "ุฃูุนู ุฐูู ูู ุจุถุนุฉ ุฃุดูุฑ ุจุดูู ุฑูุชููู.", points: 2 }, { text: "ูุนูุ ุฃุญุงูุธ ุนูู ุชูุธูู ูููู ูููุณุงุญุงุช ุงูุฑูููุฉ ูุงููุงุฏูุฉ.", points: 3 }] },
                { q: "ูุง ูุฏู ุฃูููุฉ ุงูุงูุชุฒุงู ุจุงูููุงุนูุฏ ุงูููุงุฆูุฉุ", options: [{ text: "ุบุงูุจุงู ุฃุชุฃุฎุฑ", points: 0 }, { text: "ุฃุญูุงูุงู ุฃุชุฃุฎุฑ", points: 1 }, { text: "ููุชุฒู ุจุดูู ุนุงู", points: 2 }, { text: "ุฃุตู ุฏุงุฆูุงู ูุจู ุงูููุนุฏ ุงููุญุฏุฏ", points: 3 }] }
            ],
            'T4': [ 
                { q: "ูู ุชุฌุฏ ุตุนูุจุฉ ูู ููู ูููุฉ 'ูุง'ุ", options: [{ text: "ูุงุ ุฃููููุง ุจุณูููุฉ ููุถูุญ.", points: 0 }, { text: "ุฃุญูุงูุงูุ ุฅุฐุง ูุงู ุงูุดุฎุต ูุฑูุจุงู.", points: 1 }, { text: "ูุนูุ ุฃุญุงูู ุชุฌูุจ ุฎูุจุฉ ุฃูู ุงูุขุฎุฑูู.", points: 2 }, { text: "ูุนูุ ุบุงูุจุงู ูุง ุฃูุงูู ุนูู ุฃุดูุงุก ูุง ุฃุฑูุฏูุง.", points: 3 }] },
                { q: "ูุง ูู ุฑุฏ ูุนูู ุนูุฏูุง ููุชูุฏู ุดุฎุต ูุงุ", options: [{ text: "ุฃุดุนุฑ ุจุงูุบุถุจ ูุฃุฑุฏ ุนููู ูุจุงุดุฑุฉ.", points: 0 }, { text: "ุฃุฏุงูุน ุนู ููููู ููููู ุฃุญุงูู ุงููุฏูุก.", points: 1 }, { text: "ุฃุชูุจูู ุจูุฏูุก ูุฃููุฑ ููู ูุงุญูุงู.", points: 2 }, { text: "ุฃุนุชุฐุฑ ูุฃุญุงูู ุญู ุงููุดููุฉ ุจุณุฑุนุฉ.", points: 3 }] },
                { q: "ูู ุชุนุชุจุฑ ููุณู ุดุฎุตุงู ูุงุณูุงู ูุตุฑูุญุงู ุฃู ูุทููุงู ููุฌุงูููุงุ", options: [{ text: "ูุงุณูุงู ูุตุฑูุญุงู ุฌุฏุงูุ ุฃููููุง ููุง ูู.", points: 0 }, { text: "ุตุฑูุญุงูุ ูููููู ุฃุญุงูู ุชูุทูู ุงูุนุจุงุฑุฉ.", points: 1 }, { text: "ูุทููุงู ููุฌุงููุงูุ ุฃุณุนู ูุฅุฑุงุญุฉ ุงูุขุฎุฑูู.", points: 2 }, { text: "ูุทููุงู ููุฌุงููุงู ุฌุฏุงูุ ุญุชู ูู ูุฐุจ ุฃุจูุถ.", points: 3 }] },
                { q: "ูู ุชุญุงูู ุฅุตูุงุญ ุงููุดุงูู ุจูู ุงูุขุฎุฑููุ", options: [{ text: "ุฃุจุชุนุฏ ุชูุงูุงู ุนู ุตุฑุงุนุงุช ุงูุขุฎุฑูู.", points: 0 }, { text: "ุฃูุฏู ุฑุฃูู ุฅุฐุง ุทูุจ ููู ูุจุงุดุฑุฉ.", points: 1 }, { text: "ูุนูุ ุฃุญุงูู ุงููุณุงุนุฏุฉ ูู ุฅูุฌุงุฏ ุญู ูุณุท.", points: 2 }, { text: "ูุนูุ ุฃุดุนุฑ ุฃู ูู ูุงุฌุจู ุฃู ุฃููู ุตุงูุน ุณูุงู.", points: 3 }] },
                { q: "ูุงุฐุง ุชูุนู ุนูุฏูุง ููุฏู ูู ุดุฎุต ูุง ุฎุฏูุฉ ุณูุฆุฉุ", options: [{ text: "ุฃุทูุจ ุงููุฏูุฑ ูุฃูุฏู ุดููู ุฑุณููุฉ.", points: 0 }, { text: "ุฃุนุจุฑ ุนู ุงุณุชูุงุฆู ููุดุฎุต ุงููุนูู ุจุญุฏุฉ.", points: 1 }, { text: "ุฃุบุงุฏุฑ ูุฃุชุฌูุจ ุงูุชุนุงูู ูุนูู ูุฑุฉ ุฃุฎุฑู.", points: 2 }, { text: "ูุง ุฃููู ุดูุฆุงูุ ูุง ุฃุฑูุฏ ุฅุญุฑุงุฌูู.", points: 3 }] },
                { q: "ูู ุชุซู ุจุงููุงุณ ุจุณูููุฉุ", options: [{ text: "ูุงุ ุงูุซูุฉ ูุฌุจ ุฃู ุชููุชุณุจ ุจุตุนูุจุฉ.", points: 0 }, { text: "ุฃุชูุฎู ุงูุญุฐุฑ ูู ุงูุจุฏุงูุฉ.", points: 1 }, { text: "ุฃุนุทู ุงูุซูุฉ ูุง ูู ูุซุจุช ุงูุนูุณ.", points: 2 }, { text: "ูุนูุ ุฃูุชุฑุถ ุฏุงุฆูุงู ุฃู ุงููุงุณ ุตุงุฏููู.", points: 3 }] }
            ],
            'T5': [ 
                { q: "ูู ุชููู ุฅูู ุงูููู ุจุดุฃู ุงูุฃุดูุงุก ุงูุชู ูุฏ ุชุญุฏุซ ูู ุงููุณุชูุจูุ", options: [{ text: "ุฃููู ุจุดุฃู ูู ุดูุก ุชูุฑูุจุงู ุจุดูู ูุณุชูุฑ.", points: 0 }, { text: "ููู ุจุดุฃู ุงูุฃุญุฏุงุซ ุงููุงูุฉ ููุท.", points: 1 }, { text: "ุฃููุฑ ูู ุงูุฃูุฑ ููู ูุง ุฃุฏุนู ูุณูุทุฑ ุนูู.", points: 2 }, { text: "ูุงุฏุฑ ุงููููุ ุฃูุง ูุชูุงุฆู ุจุดูู ุนุงู.", points: 3 }] },
                { q: "ูุง ูู ุฑุฏ ูุนูู ุนูุฏูุง ุชุชููู ุฃุฎุจุงุฑุงู ุณูุฆุฉ ูุฌุฃุฉุ", options: [{ text: "ุชููุงุฑ ุฃุนุตุงุจู ูุฃุดุนุฑ ุจุงูุฅุญุจุงุท ุงูุดุฏูุฏ.", points: 0 }, { text: "ุฃุดุนุฑ ุจุงูุบุถุจ ุฃู ุงูุญุฒู ุงูุดุฏูุฏุ ุซู ุฃูุฏุฃ.", points: 1 }, { text: "ุฃุธู ูุงุฏุฆุงูุ ูุฃุจุฏุฃ ูู ุงูุชุฎุทูุท ูููููุฉ ุงูุชุนุงูู ูุนูุง.", points: 2 }, { text: "ุฃุชูุจููุง ุจูุฏูุก ูุฌุฒุก ูู ุงูุญูุงุฉ.", points: 3 }] },
                { q: "ูู ุชููู ุฅูู ุชุถุฎูู ุงููุดุงูู ุงูุจุณูุทุฉ ูู ุฐูููุ", options: [{ text: "ูุนูุ ุชุจุฏู ูู ุจุณูุทุฉ ููููุง ุชุชุถุฎู ุจุณุฑุนุฉ.", points: 0 }, { text: "ุฃุญูุงูุงูุ ุฅุฐุง ููุช ูุชุนุจุงู ุฃู ุชุญุช ุงูุถุบุท.", points: 1 }, { text: "ูุงุฏุฑุงูุ ุฃุญุงูุธ ุนูู ุงูููุธูุฑ ุงููุงูุนู.", points: 2 }, { text: "ูุงุ ุฃูุง ุฌูุฏ ูู ุชูููู ุฃูููุฉ ุงูุชูุงูุงุช.", points: 3 }] },
                { q: "ูู ูุฑุฉ ุชุดุนุฑ ุฃูู ุบุงุถุจ ุฃู ูุญุจุท ูู ุงูุฃุฏุงุก ุงูุนุงู ูููููุ", options: [{ text: "ุนุฏุฉ ูุฑุงุช ูู ุงูููู.", points: 0 }, { text: "ูุฑุฉ ูุงุญุฏุฉ ููููุงู ุชูุฑูุจุงู.", points: 1 }, { text: "ุจุถุน ูุฑุงุช ูู ุงูุฃุณุจูุน.", points: 2 }, { text: "ูุงุฏุฑุงู ุฌุฏุงู.", points: 3 }] },
                { q: "ูู ุฃูุช ุดุฎุต ูุชุณู ุจุงูุฎุฌู ูู ุงูููุงูู ุงูุงุฌุชูุงุนูุฉ ุงูุฌุฏูุฏุฉุ", options: [{ text: "ุฎุฌูู ุฌุฏุงูุ ูุตุนุจ ุนูู ุงูุชูุงุนู.", points: 0 }, { text: "ุฎุฌูู ููููุงู ูู ุงูุจุฏุงูุฉุ ุซู ุฃุนุชุงุฏ.", points: 1 }, { text: "ูุณุช ุฎุฌููุงูุ ุจู ุฃููู ูุฑุงูุจุงู ููุงุฏุฆุงู.", points: 2 }, { text: "ูุณุช ุฎุฌููุงู ุนูู ุงูุฅุทูุงูุ ุฃุชุญุฏุซ ุจุซูุฉ.", points: 3 }] },
                { q: "ูู ุบุงูุจุงู ูุง ุชููู ููุณู ุนูุฏูุง ุชุณูุก ุงูุฃููุฑุ", options: [{ text: "ูุนูุ ุฏุงุฆูุงู ุฃุดุนุฑ ุจุงูุฐูุจ ูุงูููู.", points: 0 }, { text: "ุฃููู ููุณู ููููุงูุ ูููู ุฃุญุงูู ุงูุชุนูู.", points: 1 }, { text: "ุฃุจุญุซ ุนู ุญููู ููุง ุฃุฑูุฒ ุนูู ุงูููู.", points: 2 }, { text: "ูุงุ ุฃุฏุฑู ุฃู ุงูุฃุฎุทุงุก ุฌุฒุก ูู ุงูุนูููุฉ.", points: 3 }] }
            ],
            'T6': [ 
                { q: "ููู ุชุชุฎุฐ ูุฑุงุฑุงุชู ุงููุจูุฑุฉ ูู ุงูุญูุงุฉุ", options: [{ text: "ุฃุชุจุน ูุง ููููู ุนูู ููุจู ููุดุงุนุฑู ุงูุฏุงุฎููุฉ.", points: 0 }, { text: "ุฃุฌูุน ุขุฑุงุก ุฃุดุฎุงุต ุฃุซู ุจููุ ุซู ุฃูุฑุฑ.", points: 1 }, { text: "ุฃููู ุจุชุญููู ุฅูุฌุงุจูุงุช ูุณูุจูุงุช ุงูุฃูุฑ.", points: 2 }, { text: "ุฃุจูู ุงููุฑุงุฑ ุนูู ุชุญููู ุจูุงูุงุช ููุนุงููุฑ ุตุงุฑูุฉ.", points: 3 }] },
                { q: "ูู ุชุนุชูุฏ ุฃู 'ุงูุญุฏุณ' ุฃูู ูู 'ุงูููุทู' ูู ุจุนุถ ุงูุฃุญูุงูุ", options: [{ text: "ูุนูุ ุงูุญุฏุณ ูู ุฃูุถู ูุฑุดุฏ ุฏุงุฆูุงู.", points: 0 }, { text: "ุฃุญูุงูุงูุ ูููู ููุญุฏุณ ุฃู ูููู ุงูููุทู.", points: 1 }, { text: "ูุงุ ุงูููุทู ูุฌุจ ุฃู ูููู ุงูุฃุณุงุณุ ูุงูุญุฏุณ ูุณุงูุฏ.", points: 2 }, { text: "ูุงุ ุงูุญุฏุณ ูุง ูููุฉ ูู ุจุฏูู ุฅุซุจุงุช ููุทูู.", points: 3 }] },
                { q: "ูุงุฐุง ุชูุถู ุฃู ููุงู ูู: 'ุฃูุช ุดุฎุต ุญุณุงุณ' ุฃู 'ุฃูุช ุดุฎุต ุนููุงูู'ุ", options: [{ text: "ุญุณุงุณุ ุฃุฑู ุฃููุง ููุฒุฉ.", points: 0 }, { text: "ุญุณุงุณุ ููููู ุฃุญุงูู ุฃู ุฃููู ุนููุงููุงู.", points: 1 }, { text: "ุนููุงููุ ููููู ุฃูุฏุฑ ุงูุฌุงูุจ ุงูุญุณุงุณ.", points: 2 }, { text: "ุนููุงููุ ุฃูุง ูุฎูุฑ ุจุงูููุทู.", points: 3 }] },
                { q: "ุนูุฏ ุชูููู ุนููุ ูู ุชุนุทู ุงูุฃููููุฉ ูู:", options: [{ text: "ุงูุฌูุฏ ุงููุจุฐูู ูุงูุดุบู ุงูุฐู ูุธูุฑู ุตุงุญุจู.", points: 0 }, { text: "ุงูุฌูุฏุฉ ุงูุนุงุทููุฉ ูุงูุชุฃุซูุฑ ุนูู ุงูุฌูููุฑ.", points: 1 }, { text: "ูุฏู ุชูุจูุชู ูููุชุทูุจุงุช ูุงููุนุงููุฑ ุงููุญุฏุฏุฉ.", points: 2 }, { text: "ูุฏู ูุนุงููุชู ูููุงุกุชู ุงูุงูุชุตุงุฏูุฉ ูุงูููุทููุฉ.", points: 3 }] },
                { q: "ุฃูุงูู ุตุฏููุงู ูุชุดุงุฌุฑุงูุ ููู ุชุชุนุงูู ูุน ุงูููููุ", options: [{ text: "ุฃูุฏุฆููุง ูุฃุฑูุฒ ุนูู ุงูุชุนุจูุฑ ุนู ูุดุงุนุฑูู.", points: 0 }, { text: "ุฃุณุชูุน ููููููุง ุจุชุนุงุทู ูุฃุญุงูู ุงูุชูููู.", points: 1 }, { text: "ุฃุจุญุซ ุนู ุฎุทุฃ ูู ุทุฑู ูุฃุตู ุฅูู ุญู ุนุงุฏู.", points: 2 }, { text: "ุฃูุตู ุจููููุง ูุฃุญูู ุงููุดููุฉ ุจุดูู ููุถูุนู.", points: 3 }] },
                { q: "ุนูุฏูุง ุชููู ูุฑูุถุงูุ ูู ุชุซู ุจู:", options: [{ text: "ุงูุนูุงุฌุงุช ุงูุดุนุจูุฉ ูุงูุฑุงุญุฉ ููุฏุฑุฉ ุงูุฌุณู ุนูู ุงูุดูุงุก.", points: 0 }, { text: "ุชูุตูุงุช ุงูุฃุตุฏูุงุก ูุชุฌุงุฑุจูู ุงูุดุฎุตูุฉ.", points: 1 }, { text: "ุทุจูุจ ูุงุญุฏ ุชุซู ุจุฎุจุฑุชู ูุนููู.", points: 2 }, { text: "ูุฑุงุกุฉ ุงูุฃุจุญุงุซ ุงูุนูููุฉ ูุชุฌููุน ุงูุฃุฏูุฉ ูุจู ุงูุฐูุงุจ ููุทุจูุจ.", points: 3 }] }
            ],
            'T7': [ 
                { q: "ูู ุชุนุชูุฏ ุฃู ุงูุนุงูู ูู ุทุฑูู ุฃูุถู ุฃู ุฃุณูุฃุ", options: [{ text: "ุฃุณูุฃ ุจูุซูุฑุ ูุงููุณุชูุจู ูููู.", points: 0 }, { text: "ููุงุฌู ุชุญุฏูุงุชุ ูุฃูุง ููู ุจุดุฃููุง.", points: 1 }, { text: "ููุงู ุชูุฏูุ ูููู ุจุทูุก ูุบูุฑ ูุคูุฏ.", points: 2 }, { text: "ุฃูุถูุ ูุฃูุง ูุชูุงุฆู ุจุงูุชูุฏู ุงูุจุดุฑู.", points: 3 }] },
                { q: "ุฅุฐุง ุถุงุนุช ูุญูุธุชูุ ูู ุชุนุชูุฏ ุฃูู ุณุชุฌุฏูุงุ", options: [{ text: "ูุงุ ุงูุฃูุฑ ูุณุชุญูู ุชูุฑูุจุงู.", points: 0 }, { text: "ุฃุดู ูู ุฐููุ ูููููู ุณุฃุจูุบ ุงูุดุฑุทุฉ.", points: 1 }, { text: "ุฑุจูุงุ ุฅุฐุง ููุช ูุญุธูุธุงู.", points: 2 }, { text: "ูุนูุ ุณูุนูุฏูุง ุดุฎุต ุฃููู ุจุงูุชุฃููุฏ.", points: 3 }] },
                { q: "ูุงุฐุง ุชูุนู ุฅุฐุง ูุดูุช ูู ุชุญููู ูุฏู ูููุ", options: [{ text: "ุฃุดุนุฑ ุจุงูุฅุญุจุงุท ูุฃููุฑ ูู ุงูุชููู ุนู ุงููุญุงููุฉ.", points: 0 }, { text: "ุฃุญูู ุงูุฃุฎุทุงุก ูุฃุจุฏุฃ ุงููุญุงููุฉ ุงูุฌุฏูุฏุฉ ุจุญุฐุฑ.", points: 1 }, { text: "ุฃุนุชูุฏ ุฃููุง ุชุฌุฑุจุฉ ููุชุนูู ูุฃุนูุฏ ุงููุญุงููุฉ ููุฑุงู.", points: 2 }, { text: "ุฃููู ูููุณู: ูู ููู ูุฐุง ุงูุทุฑูู ุงูููุงุณุจุ ููุงู ุทุฑูู ุฃูุถู ููุชุธุฑูู.", points: 3 }] },
                { q: "ูู ุชุฑู ุงูุฃุฎุทุงุก ุนูู ุฃููุง 'ุฏููู' ุนูู ุฃูู ุบูุฑ ููุก ุฃู 'ูุฑุตุฉ' ูููููุ", options: [{ text: "ุฏููู ุนูู ุฃููู ุบูุฑ ููุก.", points: 0 }, { text: "ุฏููู ุนูู ุฃููู ุจุญุงุฌุฉ ููุนูู ุจุฌูุฏ ุฃูุจุฑ.", points: 1 }, { text: "ูุฑุตุฉ ููููู ูุงูุชุนูู.", points: 2 }, { text: "ูุฑุตุฉ ุฑุงุฆุนุฉ ููุณุฑ ุงูููุงุนุฏ ูุงูุงุจุชูุงุฑ.", points: 3 }] },
                { q: "ุนูุฏูุง ููุงุฌู ุตุฏููู ูุดููุฉุ ูู ุชููู ูู:", options: [{ text: "ูุฐู ูุชูุฌุฉ ูุชููุนุฉ ูุณูุก ุงูุชุฎุทูุท.", points: 0 }, { text: "ูุฌุจ ุฃู ุชููู ูุณุชุนุฏุงู ููุฃุณูุฃ ุฏุงุฆูุงู.", points: 1 }, { text: "ูุง ุชูููุ ุณุชุฌุฏ ุญูุงู ููุฐุง ุงูุฃูุฑ.", points: 2 }, { text: "ูุฐุง ูุฌุฑุฏ ุนูุจุฉ ุตุบูุฑุฉุ ุชุฐูุฑ ูู ุฃูุช ููู.", points: 3 }] },
                { q: "ูุง ูู ุฌููุชู ุงูููุถูุฉุ", options: [{ text: "ูุง ุดูุก ุฌูุฏ ูุฏูู ุฅูู ุงูุฃุจุฏ.", points: 0 }, { text: "ุงูุญุธ ููุถู ุงูุนูู ุงููุณุชุนุฏ.", points: 1 }, { text: "ูู ุดูุก ูุญุฏุซ ูุณุจุจ ูุง.", points: 2 }, { text: "ุงูุฃูุถู ูู ูุฃุช ุจุนุฏ.", points: 3 }] }
            ],
            'T8': [ 
                { q: "ูู ุชุดุนุฑ ุจุงููุฏู ุจุนุฏ ุงุชุฎุงุฐ ูุฑุงุฑ ูุจูุฑุ", options: [{ text: "ูุนูุ ุบุงูุจุงู ูุง ุฃุดู ูู ุงุฎุชูุงุฑุงุชู.", points: 0 }, { text: "ุฃุญูุงูุงูุ ูููู ุฃูุถู ูุฏูุงู.", points: 1 }, { text: "ูุงุฏุฑุงูุ ุจูุฌุฑุฏ ุงุชุฎุงุฐ ุงููุฑุงุฑุ ุฃุฑูุฒ ุนูู ุชูููุฐู.", points: 2 }, { text: "ุฃุจุฏุงูุ ุฃูุง ุฃุซู ูู ุนูููุฉ ุงุชุฎุงุฐ ูุฑุงุฑุงุชู.", points: 3 }] },
                { q: "ุฅุฐุง ูุงู ูุฏูู ุฎูุงุฑุงู ุฌูุฏุงูุ ููู ุชุฎุชุงุฑุ", options: [{ text: "ุฃุจุญุซ ุนู ุฎูุงุฑ ุซุงูุซ ูุชุฌูุจ ุงูุงุฎุชูุงุฑ.", points: 0 }, { text: "ุฃุทูุจ ูู ุตุฏูู ุฃู ูุฎุชุงุฑ ูู.", points: 1 }, { text: "ุฃุฎุชุงุฑ ุงูุฃูุถู ููุฑุงู ูุฃูุถู ูุฏูุงู.", points: 2 }, { text: "ุฃุฎุชุงุฑ ุจุณุฑุนุฉ ููุง ุฃูุชู ุจุงูุนูุงูุจ.", points: 3 }] },
                { q: "ูู ุชุชุฑู ุงููุฑุงุฑุงุช ุงููููุฉ ุญุชู ุงูููู ุงูุฃุฎูุฑ ูุจู ุงูููุนุฏ ุงูููุงุฆูุ", options: [{ text: "ูุนูุ ุงูุชูุชุฑ ูุณุงุนุฏูู ุนูู ุงูุชุฑููุฒ.", points: 0 }, { text: "ุฃุญูุงูุงูุ ุฅุฐุง ูู ุฃุฌุฏ ูู ุงููุนูููุงุช ุงููุงุฒูุฉ.", points: 1 }, { text: "ูุงุฏุฑุงูุ ุฃูุถูู ุฅููุงุกูุง ูุจูุฑุงู.", points: 2 }, { text: "ุฃุจุฏุงูุ ุฃุชุฎุฐูุง ูู ุฃูุฑุจ ููุช ูููู.", points: 3 }] },
                { q: "ูู ูู ุงูููุช ุชุณุชุบุฑู ูุงุฎุชูุงุฑ ุทุจูู ูู ุงููุทุนูุ", options: [{ text: "ุฃูุซุฑ ูู 10 ุฏูุงุฆู", points: 0 }, { text: "5 ุฏูุงุฆูุ ุจุนุฏ ููุงุฑูุฉ ุงูุฎูุงุฑุงุช", points: 1 }, { text: "ุฏูููุฉ ุฃู ุฏูููุชุงู", points: 2 }, { text: "ุฃุนุฑู ูุณุจูุงู ูุจู ุงููุตูู", points: 3 }] },
                { q: "ูู ูููู ุทุงุฑุฆ ูุชุทูุจ ุงุณุชุฌุงุจุฉ ููุฑูุฉุ ูู ุชุดุนุฑ ุจู:", options: [{ text: "ุงูุงุฑุชุจุงู ูุนุฏู ุงููุฏุฑุฉ ุนูู ูุนู ุดูุก.", points: 0 }, { text: "ูุญุงููุฉ ููู ุงููุถุนุ ุซู ุงูุนูู ุจุญุฐุฑ.", points: 1 }, { text: "ุงููุฏุฑุฉ ุนูู ุงุชุฎุงุฐ ุงูุฅุฌุฑุงุก ุงูุฃูู ุจุณุฑุนุฉ.", points: 2 }, { text: "ุงูุซูุฉ ูุงูููุงุฏุฉ ุงูููุฑูุฉ ูููููู.", points: 3 }] },
                { q: "ูู ุชุถููุน ููุชู ูู ุงูุชูููุฑ ูููุง ูุฌุจ ุฃู ุชูุนููุ", options: [{ text: "ูุนูุ ุงูุชูููุฑ ูุณุชููู ุงููุซูุฑ ูู ููุชู.", points: 0 }, { text: "ุฃุญูุงูุงูุ ุนูุฏูุง ุชููู ุงูุฎูุงุฑุงุช ุตุนุจุฉ.", points: 1 }, { text: "ุฃุฎุตุต ููุชุงู ููุชุฎุทูุทุ ุซู ุฃุจุฏุฃ ุงูุชูููุฐ.", points: 2 }, { text: "ุฃุจุฏุฃ ุงูุนูู ูุจุงุดุฑุฉุ ูุฃุตุญุญ ุงููุณุงุฑ ูุงุญูุงู.", points: 3 }] }
            ],
            'T9': [ 
                { q: "ุฅุฐุง ูุงู ุตุฏููู ุญุฒููุงูุ ูู ุชููู ุฅูู:", options: [{ text: "ุฅุนุทุงุฆู ุญูููุงู ููุทููุฉ ููุดููุชู.", points: 0 }, { text: "ุชุฐููุฑู ุจุงูุญูุงุฆู ุงูุฅูุฌุงุจูุฉ.", points: 1 }, { text: "ุงูุงุณุชูุงุน ูู ููุดุงุฑูุชู ูุดุงุนุฑู.", points: 2 }, { text: "ุงูุจูุงุก ูุนู ูุงูุดุนูุฑ ุจุฃููู ูุฃูู ุฃููู.", points: 3 }] },
                { q: "ูู ุชุชุฃุซุฑ ุจุดุฏุฉ ุจูุดุงูุฏุฉ ุงูุฃุฎุจุงุฑ ุงูุญุฒููุฉ ุฃู ุงููุคููุฉุ", options: [{ text: "ูุงุ ุฃุญุงูุธ ุนูู ุญูุงุฏูุชู ุชุฌุงู ุงูุฃุญุฏุงุซ.", points: 0 }, { text: "ุฃุดุนุฑ ุจุงูุญุฒูุ ููููู ุฃุชุนุงูู ุจุณุฑุนุฉ.", points: 1 }, { text: "ูุนูุ ูููู ุฃู ูุคุซุฑ ุฐูู ุนูู ูููู ุจุฃูููู.", points: 2 }, { text: "ูุนูุ ุฃุญูุงูุงู ุฃุดุนุฑ ุจุงูุนุฌุฒ ูุฃุจูู.", points: 3 }] },
                { q: "ุนูุฏูุง ูุฑุชูุจ ุดุฎุต ูุง ุฎุทุฃุ ูู ุชููุฑ ุจู:", options: [{ text: "ูุฏู ุชุฃุซูุฑ ุงูุฎุทุฃ ุนูู ุงููุธุงู ูุงูุนูู.", points: 0 }, { text: "ุงูููุงุนุฏ ุงูุชู ุชู ุงูุชูุงููุง ูุงูุนุฏุงูุฉ.", points: 1 }, { text: "ููุงุฐุง ูุนู ุฐูู ุงูุดุฎุต ูุฐุง ุงูุฎุทุฃ (ุงูุฏุงูุน).", points: 2 }, { text: "ููู ูุดุนุฑ ุฐูู ุงูุดุฎุต ุงูุขู ุจุณุจุจ ุฎุทุฆู.", points: 3 }] },
                { q: "ูู ุชุญุงูู ูุฑุงุกุฉ ุชุนุงุจูุฑ ูุฌู ุงููุงุณ ูุชุญุฏูุฏ ูุง ูุดุนุฑูู ุจูุ", options: [{ text: "ูุงุฏุฑุงูุ ุฃุนุชูุฏ ุนูู ูุง ููููููู.", points: 0 }, { text: "ุฃุญูุงูุงูุ ููุชุฃูุฏ ูู ูููู ูุฑุณุงูุชูู.", points: 1 }, { text: "ูุนูุ ุฃูุชู ูุซูุฑุงู ุจูุบุฉ ุงูุฌุณุฏ.", points: 2 }, { text: "ูุนูุ ุฃุณุชุทูุน ุบุงูุจุงู ุงูุดุนูุฑ ุจูุง ูุฏูุฑ ูู ุฃุฐูุงููู.", points: 3 }] },
                { q: "ุฅุฐุง ุงุถุทุฑุฑุช ูุทุฑุฏ ููุธู ูุชูููู ุงููููุงุชุ ููู ุณุชุดุนุฑ ุจู:", options: [{ text: "ุงูุฑุถุง ุนู ุงุชุฎุงุฐ ูุฑุงุฑ ููุทูู ููุดุฑูุฉ.", points: 0 }, { text: "ุจุนุถ ุงููููุ ูููู ุฃุนุฑู ุฃูู ุถุฑูุฑู.", points: 1 }, { text: "ุงูุญุฒู ุงูุดุฏูุฏ ุนูู ุชุฃุซูุฑู ุนูู ุญูุงุฉ ุงูููุธู.", points: 2 }, { text: "ุงูุฐูุจ ูุงูุนุฌุฒ ุนู ุงูููุงู ุจูุฐุง ุงููุนู.", points: 3 }] },
                { q: "ูู ุชุบูุฑ ุฑุฃูู ุจุณูููุฉ ุจูุงุกู ุนูู ูุดุงุนุฑ ุดุฎุต ุขุฎุฑุ", options: [{ text: "ุฃุจุฏุงูุ ูุฑุงุฑุงุชู ูุณุชููุฉ ุนู ุงูุนูุงุทู.", points: 0 }, { text: "ูุงุฏุฑุงูุ ุฅุฐุง ูุงู ุงูุดุฎุต ูุฑูุจุงู ุฌุฏุงู.", points: 1 }, { text: "ุฃุญูุงูุงูุ ุฅุฐุง ุฃุซุฑุช ูุดุงุนุฑูู ูู ุชูููุฑู.", points: 2 }, { text: "ูุนูุ ูุง ุฃุณุชุทูุน ุงููููู ุฃูุงู ูุดุงุนุฑูู ุงููููุฉ.", points: 3 }] }
            ],
            'T10': [ 
                { q: "ูุง ูู ุฏูุฑู ุงูููุถู ูู ูุดุฑูุน ุฌูุงุนูุ", options: [{ text: "ููุฏูู ุงูุฌูุฏุฉ ูุงููุฏูู ุงููุบูู.", points: 0 }, { text: "ุงูุดุฎุต ุงูุฐู ูุถุน ุฎุทุฉ ุงูุนูู ุงูุชูููุฐูุฉ.", points: 1 }, { text: "ุงูุดุฎุต ุงูุฐู ูุญุฏุฏ ุงูุฃูุฏุงู ุงูุนุงูุฉ ูุงูุงุชุฌุงู.", points: 2 }, { text: "ุงูุนูู ุงููุฏุจุฑ ุงูุฐู ูุฑู ุงูุตูุฑุฉ ุงููุจูุฑุฉ ูููุณุชูุจู.", points: 3 }] },
                { q: "ุฃูู ุชุฑูุฒ ูุนุธู ุงูุชุจุงููุ", options: [{ text: "ุนูู ุงูููุงู ุงูุตุบูุฑุฉ ูู ุงููุญุธุฉ ุงูุญุงููุฉ.", points: 0 }, { text: "ุนูู ุงูุฃุณุจูุน ุฃู ุงูุดูุฑ ุงููุงุฏููู.", points: 1 }, { text: "ุนูู ุงูุนุงู ุงููุงุฏู ูุงูุฃูุฏุงู ุงูุจุนูุฏุฉ.", points: 2 }, { text: "ุนูู ูุง ูุฌุจ ุฃู ูุญุฏุซ ุจุนุฏ 5 ุฃู 10 ุณููุงุช.", points: 3 }] },
                { q: "ูุง ูู ุดุนูุฑู ุชุฌุงู ุงูุฃุฎุทุงุก ุงูุจุณูุทุฉ ูู ุงูุทุจุงุนุฉุ", options: [{ text: "ูุง ุฃุญุชูููุง ุฃุจุฏุงูุ ูุฌุจ ุชุตุญูุญูุง ููุฑุงู.", points: 0 }, { text: "ูุฒุนุฌุฉุ ููู ูููู ุงูุชุบุงุถู ุนููุง ูู ุจุนุถ ุงูุณูุงูุงุช.", points: 1 }, { text: "ูุง ุฃูุงุญุธูุง ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ูุงุถุญุฉ.", points: 2 }, { text: "ูู ุชูุงุตูู ุชุดุชุช ุงูุงูุชุจุงู ุนู ุงูููุฑุฉ ุงููุจุฑู.", points: 3 }] },
                { q: "ูู ุชููู ุฅูู ุงููุฑุงุฌุนุฉ ูุงูุชุฏููู ุงููุชูุฑุฑ ูุนูููุ", options: [{ text: "ูุนูุ ุฃูุฑุฑ ุงูุชุฏููู ูุฃููุน ุฃู ุฎุทุฃ.", points: 0 }, { text: "ูุนูุ ุฃุฑุงุฌุน ุงูุฃุฌุฒุงุก ุงูุญุณุงุณุฉ ููุท.", points: 1 }, { text: "ูุงุ ุฃุฑูุฒ ุนูู ุฅูุฌุงุฒ ุงูุนูู ูุฃุซู ูู ุฌูุฏุชู ุงูุฃูููุฉ.", points: 2 }, { text: "ุฃุจุฏุงูุ ุจูุฌุฑุฏ ุงูุงูุชูุงุกุ ุฃููุฑ ูู ุงููุดุฑูุน ุงูุชุงูู.", points: 3 }] },
                { q: "ูุง ูู ุดุนูุฑู ุชุฌุงู ุงูุฅุญุตุงุกุงุช ูุงูุจูุงูุงุชุ", options: [{ text: "ุถุฑูุฑูุฉ ูุจุนุถ ุงููุธุงุฆู ุงููููุฉ.", points: 0 }, { text: "ูููุฏุฉ ุฌุฏุงู ูุงุชุฎุงุฐ ุงููุฑุงุฑุงุช ุงูููููุฉ.", points: 1 }, { text: "ุฃุณุชุฎุฏููุง ูุงุณุชูุชุงุฌ ุงูุงุชุฌุงูุงุช ุงููููุฉ.", points: 2 }, { text: "ูู ููุงุท ุงูุทูุงู ูุฅูุดุงุก ูุธุฑูุงุช ุฌุฏูุฏุฉ ููุณุชูุจููุฉ.", points: 3 }] },
                { q: "ุนูุฏูุง ุชูุฑุฃ ูุชุงุจุงูุ ูู ุชุฑูุฒ ุนูู:", options: [{ text: "ุฃุณูุงุก ุงูุดุฎุตูุงุช ูุงูุชูุงุฑูุฎ ูุงูุฃุญุฏุงุซ ุงูุฏูููุฉ.", points: 0 }, { text: "ุชุณูุณู ุงูุฃุญุฏุงุซ ูุชุฏูู ุงููุตุฉ.", points: 1 }, { text: "ุงููุนูู ุงูุนุงู ูุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ.", points: 2 }, { text: "ููู ูููู ุชุทุจูู ุงูุฃููุงุฑ ุงูุฑุฆูุณูุฉ ุนูู ุญูุงุชู.", points: 3 }] }
            ]
        };

        const traitNames = {
            'T1': "ุงูุงูุจุณุงุทูุฉ/ุงูุงูุทูุงุฆูุฉ", 'T2': "ุงูุงููุชุงุญ/ุงูุชูููุฏูุฉ", 'T3': "ุงูุงูุชุฒุงู/ุงูุนูููุฉ",
            'T4': "ุงููุฏ/ุงูุชุญุฏู", 'T5': "ุงูุงุณุชูุฑุงุฑ/ุงูุนุตุจูุฉ", 'T6': "ุงูููุทู/ุงูุนุงุทูุฉ",
            'T7': "ุงูุชูุงุคู/ุงููุงูุนูุฉ", 'T8': "ุงูุญุณู/ุงูุชุฑุฏุฏ", 'T9': "ุงูุชุนุงุทู/ุงูููุถูุนูุฉ",
            'T10': "ุงูุฑุคูุฉ ุงููููุฉ/ุงูุชูุงุตูู"
        };
        const traitDescriptions = (score, trait) => {
            const max = 3;
            let poleA = trait.split('/')[0];
            let poleB = trait.split('/')[1];

            if (score === 0) return `ููู ููู ุฌุฏุงู ูุญู ${poleB}`;
            if (score === 1) return `ููู ูุญู ${poleB}`;
            if (score === 2) return `ููู ูุญู ${poleA}`;
            if (score === 3) return `ููู ููู ุฌุฏุงู ูุญู ${poleA}`;
            return 'ุชูุงุฒู';
        };

        // ** ุฃุณุฆูุฉ ุงูุฐูุงุก (IQ): ุชู ุฒูุงุฏุฉ ุนุฏุฏ ุงูุฃุณุฆูุฉ ูุฃูุซุฑ ูู 30 ุณุคุงูุงู ูุชูููุฑ ุงูุชููุน ุงูุนุดูุงุฆู **
        const iqQuestionPool = [
            { q: "ูุง ูู ุงูุฑูู ุงูุฐู ูุฌุจ ุฃู ูุญู ูุญู ุนูุงูุฉ ุงูุงุณุชููุงูุ 2, 4, 8, 16, ุ", answer: 32, options: [{ text: "20" }, { text: "24" }, { text: "30" }, { text: "32" }] },
            { q: "ุฃู ูููุฉ ูุง ุชูุชูู ูููุฌููุนุฉุ (ุจุทุงุทุณุ ุฌุฒุฑุ ุจุตูุ ุชูุงุญ)", answer: "ุชูุงุญ", options: [{ text: "ุจุทุงุทุณ" }, { text: "ุฌุฒุฑ" }, { text: "ุจุตู" }, { text: "ุชูุงุญ" }] },
            { q: "ุฃููู ุงูุณูุณูุฉ: ุฃุ ุฌุ ููุ ุฒุ ุ", answer: "ุท", options: [{ text: "ุญ" }, { text: "ุท" }, { text: "ู" }, { text: "ู" }] },
            { q: "ุฅุฐุง ูุงู 'ูุชุงุจ' ูุณุงูู 'ููู' ู 'ุจุงุจ' ูุณุงูู 'ููุชุงุญ'ุ ููุงุฐุง ูุณุงูู 'ููู'ุ", answer: "ุณุฑูุฑ", options: [{ text: "ุงุณุชููุงุธ" }, { text: "ูุณุงุฏุฉ" }, { text: "ุณุฑูุฑ" }, { text: "ุชุนุจ" }] },
            { q: "ุฅุฐุง ูุงูุช ูุฑูู ุฃุทูู ูู ุณุงุฑุฉุ ูุณุงุฑุฉ ุฃุทูู ูู ููููุ ููู ุงูุฃูุตุฑุ", answer: "ูููู", options: [{ text: "ูุฑูู" }, { text: "ุณุงุฑุฉ" }, { text: "ูููู" }, { text: "ูุง ูููู ุงูุชุญุฏูุฏ" }] },
            { q: "ูุง ุงูุดูู ุงูุชุงูู ูู ุงูุชุณูุณู (ูุฑุจุนุ ุฏุงุฆุฑุฉุ ูุซูุซุ ูุฑุจุนุ ุฏุงุฆุฑุฉุ ุ)", answer: "ูุซูุซ", options: [{ text: "ูุฑุจุน" }, { text: "ุฏุงุฆุฑุฉ" }, { text: "ูุซูุซ" }, { text: "ูุณุชุทูู" }] },
            { q: "ุฅุฐุง ูุงู ุณุนุฑ ุฎูุณุฉ ุฃููุงู ูู 25 ุฑูุงูุงูุ ููู ุณุนุฑ ุณุจุนุฉ ุฃููุงูุ", answer: 35, options: [{ text: "30" }, { text: "35" }, { text: "40" }, { text: "45" }] },
            { q: "ุฃู ููุง ููู ูู ูุฑุงุฏู ููููุฉ 'ููููุนูุชูู'ุ", answer: "ูุชุญุฑุฑ", options: [{ text: "ููุญุงุตูุฑ" }, { text: "ูููููุฏ" }, { text: "ูุชุญุฑุฑ" }, { text: "ููุชููุตูู" }] },
            { q: "ูุง ุงููุณุฑ ุงูุฐู ูุณุงูู 0.5ุ", answer: "1/2", options: [{ text: "1/4" }, { text: "1/2" }, { text: "3/4" }, { text: "1/3" }] },
            { q: "ูุง ุงููููุฉ ุงููุฎุชููุฉ: (ุทุงุฆุฑุฉุ ุณูุงุฑุฉุ ูุทุงุฑุ ุทุฑูู)ุ", answer: "ุทุฑูู", options: [{ text: "ุทุงุฆุฑุฉ" }, { text: "ุณูุงุฑุฉ" }, { text: "ูุทุงุฑ" }, { text: "ุทุฑูู" }] },
            { q: "ุฅุฐุง ูุงู (ุฃุจ = 12ุ ุจ ุฌ = 23ุ ุฌ ุฏ = 34)ุ ููู (ุฏ ูู = ุ)", answer: 45, options: [{ text: "44" }, { text: "45" }, { text: "55" }, { text: "56" }] },
            { q: "ุฃู ุฑูู ูุฌุจ ุงุณุชุจุฏุงูู ูุชุตุญูุญ ุงูุชุฑุชูุจ: 10, 20, 30, 45, 50, 60ุ", answer: 45, options: [{ text: "30" }, { text: "45" }, { text: "50" }, { text: "60" }] },
            { q: "ูุง ูู ุงูุดูุก ุงูุฐู ูููุง ุฒุงุฏ ููุตุ", answer: "ุงูุนูุฑ", options: [{ text: "ุงููุฒู" }, { text: "ุงููุงู" }, { text: "ุงูุนูุฑ" }, { text: "ุงูุณุนุงุฏุฉ" }] },
            { q: "ุฃู ูููุฉ ูููู ุชูููููุง ูู ุญุฑูู ูููุฉ (ุฅููุงู)ุ", answer: "ููููุญ", options: [{ text: "ููุงุก" }, { text: "ููููุญ" }, { text: "ููู" }, { text: "ูุงุฑ" }] },
            { q: "ุฅุฐุง ูุงูุช 'ุตุบูุฑ' ุถุฏ 'ูุจูุฑ'ุ ููุง ุถุฏ 'ุตุนูุฏ'ุ", answer: "ูุจูุท", options: [{ text: "ุณููุท" }, { text: "ูุจูุท" }, { text: "ูููู" }, { text: "ุทูุฑุงู" }] },
            { q: "ุฃู ูู ุงูุฃุดูุงู ูุฎุชูู ุนู ุงูุจููุฉุ (ุฏุงุฆุฑุฉุ ูุฑุจุนุ ูุซูุซุ ุจูุถุงูู)", answer: "ุจูุถุงูู", options: [{ text: "ุฏุงุฆุฑุฉ" }, { text: "ูุฑุจุน" }, { text: "ูุซูุซ" }, { text: "ุจูุถุงูู" }] },
            { q: "ูุง ุงูุฑูู ุงูุชุงูู ูู ุงูุณูุณูุฉ: 1, 1, 2, 3, 5, 8, ุ", answer: 13, options: [{ text: "11" }, { text: "12" }, { text: "13" }, { text: "14" }] },
            { q: "ุฅุฐุง ูุงู (ุฃุฎุถุฑ=5ุ ุฃุฒุฑู=6ุ ุฃุญูุฑ=4)ุ ููู (ุฃุตูุฑ= ุ)", answer: 6, options: [{ text: "5" }, { text: "6" }, { text: "7" }, { text: "8" }] },
            { q: "ุฃู ุดูุฑ ููุชูู 28 ูููุงูุ", answer: "ูู ุงูุดููุฑ", options: [{ text: "ูุจุฑุงูุฑ ููุท" }, { text: "ูู ุงูุดููุฑ" }, { text: "ููุงูุฑ ููุงุฑุณ" }, { text: "ููููุจุฑ" }] },
            { q: "ุฅุฐุง ููุช ุชููุฏ ุญุงููุฉ ุจูุง 40 ุฑุงูุจุงูุ ู ุชููู 5 ูู ุงููุญุทุฉ ุงูุฃูููุ ู ุตุนุฏ 7 ูู ุงูุซุงููุฉุ ููุง ูู ุงุณู ุงูุณุงุฆูุ", answer: "ุงุณูู", options: [{ text: "ุงุณูู" }, { text: "ุงุณู ุฃูู ุฑุงูุจ" }, { text: "ุงุณู ุขุฎุฑ ุฑุงูุจ" }, { text: "ุงุณู ุฃูู ูุญุทุฉ" }] },
            { q: "ุฃู ุดูู ูุฃุชู ุจุนุฏ ุงูุฏุงุฆุฑุฉ ูู ุงูุชุณูุณู: (ูุฑุจุนุ ูุซูุซุ ุฏุงุฆุฑุฉุ ูุซูุซุ ูุฑุจุนุ ุ)", answer: "ุฏุงุฆุฑุฉ", options: [{ text: "ูุฑุจุน" }, { text: "ูุซูุซ" }, { text: "ุฏุงุฆุฑุฉ" }, { text: "ูุณุชุทูู" }] },
            { q: "ูุง ูู ุงูุญุฑู ุงูููููุฏ ูู ุงูุณูุณูุฉ: ุจุ ุฏุ ูุ ุญุ ุ", answer: "ู", options: [{ text: "ุท" }, { text: "ู" }, { text: "ู" }, { text: "ู" }] },
            { q: "ุฅุฐุง ูุงู 1=3ุ 2=3ุ 3=5ุ 4=4ุ 5=4ุ ููู ูุณุงูู 6ุ", answer: 3, options: [{ text: "3" }, { text: "4" }, { text: "5" }, { text: "6" }] },
            { q: "ูุง ูู ุงูุญููุงู ุงูุฐู ูุง ูุณุชุทูุน ุงูููุฒุ", answer: "ุงูููู", options: [{ text: "ุงูููุบุฑ" }, { text: "ุงูุฎูุงุด" }, { text: "ุงูููู" }, { text: "ุงูุถูุฏุน" }] },
            { q: "ูุง ูู ุงูุดูุก ุงูุฐู ูู ุฃุณูุงู ููููู ูุง ูุฃููุ", answer: "ุงููุดุท", options: [{ text: "ุงูุดููุฉ" }, { text: "ุงููุดุท" }, { text: "ุงูููุดุงุฑ" }, { text: "ุงูุนุฌูุฉ" }] },
            { q: "ุฅุฐุง ูุงู (4x = 20) ููู ุชุณุงูู (x + 3)ุ", answer: 8, options: [{ text: "5" }, { text: "7" }, { text: "8" }, { text: "10" }] },
            { q: "ุฃู ุฑูู ูู ุงูุฃูุจุฑ: 2ยณ ุฃู 3ยฒ ุฃู 2โดุ", answer: 2^4, options: [{ text: "2ยณ" }, { text: "3ยฒ" }, { text: "2โด" }, { text: "ูุชุณุงููุงู" }] },
            { q: "ูุง ูู ุงูุชูุณูุฑ ุงูููุงุณุจ ูู 1, 2, 4, 8, 16ุ", answer: "ุงูุถุฑุจ ูู 2", options: [{ text: "ุงูุฌูุน ุจู 2" }, { text: "ุงูุถุฑุจ ูู 2" }, { text: "ุงูุฌูุน ุจู 4" }, { text: "ุงูุฑูุน ููุฃุณ" }] },
        ];


        // ===================================================================
        // 3. ูุธุงุฆู ุงูุชููู ูุงููุงุฌูุฉ
        // ===================================================================

        // ุนุฑุถ ุดุงุดุฉ ุงูุงุฎุชูุงุฑ
        function showSelectionScreen() {
            if (appState.timer) clearInterval(appState.timer);
            elements.header.textContent = "ููุตุฉ ุงูุงุฎุชุจุงุฑุงุช ุงูุฐูููุฉ ูุงูุดุฎุตูุฉ";
            elements.selection.classList.remove('hidden');
            elements.quiz.classList.add('hidden');
            elements.result.classList.add('hidden');
            elements.timerDisplay.classList.add('hidden');
        }

        // ุจุฏุก ุงูุงุฎุชุจุงุฑ
        function startTest(mode) {
            appState.mode = mode;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.timer = null;
            appState.userAnswers = [];
            appState.personalityScores = {}; 
            appState.startTime = Date.now(); 

            
            switch (mode) {
                case 'personality':
                    appState.currentQuizData = generatePersonalityQuiz();
                    elements.header.textContent = "ุงุฎุชุจุงุฑ ุงูุดุฎุตูุฉ ุงูุณุฑูุน (10 ุฃุณุฆูุฉ)";
                    elements.timerDisplay.classList.add('hidden');
                    elements.nextButton.textContent = 'ุงูุชุงูู โ';
                    elements.prevButton.classList.remove('hidden');
                    break;
                case 'iq':
                    appState.currentQuizData = generateIQQuiz(); // 12 ุณุคุงู ุนุดูุงุฆู
                    elements.header.textContent = `ุงุฎุชุจุงุฑ ุงูุฐูุงุก (IQ) - ${NUM_IQ_QUESTIONS} ุณุคุงู`;
                    elements.timerDisplay.classList.add('hidden');
                    elements.nextButton.textContent = 'ุงูุชุงูู โ';
                    elements.prevButton.classList.remove('hidden');
                    break;
                case 'math':
                    appState.currentQuizData = generateMathQuiz(100); // ูููุฏ 100 ุณุคุงู ููุฎุชุงุฑ ูููุง 12
                    appState.currentQuizData = appState.currentQuizData.slice(0, NUM_MATH_QUESTIONS); // ุงุฎุชูุงุฑ 12 ุณุคุงู ุนุดูุงุฆู
                    elements.header.textContent = `ูุณุงุจูุฉ ุงูุณุฑุนุฉ (ุฑูุงุถูุงุช) - ${NUM_MATH_QUESTIONS} ุณุคุงู ูู 60 ุซุงููุฉ`;
                    elements.timerDisplay.classList.remove('hidden');
                    elements.prevButton.classList.add('hidden');
                    startMathTimer(60);
                    break;
            }

            elements.selection.classList.add('hidden');
            elements.result.classList.add('hidden');
            elements.quiz.classList.remove('hidden');
            elements.geminiAnalysisArea.classList.add('hidden'); 
            elements.shareImageArea.classList.add('hidden'); 

            renderQuestion();
        }

        // ุนุฑุถ ุงูุณุคุงู
        function renderQuestion() {
            // ููุทู ุงูุงูุชูุงุก ูู ุงูุงุฎุชุจุงุฑ
            if (appState.currentQuestionIndex >= appState.currentQuizData.length) {
                if (appState.mode === 'iq') appState.iqEndTime = Date.now(); 
                calculateResult();
                return;
            }

            const questionData = appState.currentQuizData[appState.currentQuestionIndex];
            
            elements.questionContainer.innerHTML = `
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-6 leading-relaxed">
                    ${appState.currentQuestionIndex + 1}. ${questionData.q || questionData.question}
                </h2>
                <div id="options-container" class="space-y-3">
                    <!-- ุงูุฎูุงุฑุงุช ุชุถุงู ููุง -->
                </div>
            `;

            const optionsContainer = document.getElementById('options-container');

            if (appState.mode === 'math') {
                 // ูุถุน ุงูุฑูุงุถูุงุช
                 elements.questionContainer.innerHTML += `
                     <input type="number" id="math-answer" placeholder="ุฃุฏุฎู ุงูุฅุฌุงุจุฉ ููุง..." 
                            class="w-full p-4 border-2 border-gray-300 rounded-xl text-center text-2xl focus:border-indigo-500 transition duration-300"
                            oninput="checkMathAnswer()">
                 `;
                 
                 elements.nextButton.textContent = 'ุฅุฌุงุจุฉ โ';
                 elements.nextButton.disabled = true;
                 const input = document.getElementById('math-answer');
                 
                 if (appState.userAnswers[appState.currentQuestionIndex] !== undefined) {
                     input.value = appState.userAnswers[appState.currentQuestionIndex];
                     elements.nextButton.disabled = false;
                 } else {
                    setTimeout(() => input.focus(), 50);
                 }

            } else {
                // ูุถุน ุงูุดุฎุตูุฉ ูุงูุฐูุงุก (ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ)
                questionData.options.forEach((option, index) => {
                    const optionText = appState.mode === 'personality' ? option.text : option;
                    
                    const optionElement = document.createElement('div');
                    optionElement.className = 'quiz-option p-4 border border-gray-200 rounded-xl text-gray-700 hover:bg-green-50';
                    optionElement.textContent = optionText;
                    optionElement.setAttribute('data-index', index);
                    
                    if (appState.userAnswers[appState.currentQuestionIndex] === index) {
                        optionElement.classList.add('selected');
                    }

                    optionElement.onclick = () => selectOption(index);
                    optionsContainer.appendChild(optionElement);
                });
            }

            updateNavigationButtons();
            updateProgressBar();
            updateQuestionCounter();
        }

        // ===================================================================
        // 4. ูุธุงุฆู ุงูุงุฎุชุจุงุฑุงุช ุงูุฎุงุตุฉ
        // ===================================================================

        // ุงุฎุชูุงุฑ 10 ุฃุณุฆูุฉ ุนุดูุงุฆูุฉ ูู ูุฌููุนุงุช ุงูุดุฎุตูุฉ
        function generatePersonalityQuiz() {
            const quiz = [];
            for (const trait in personalityPool) {
                const pool = personalityPool[trait];
                const randomIndex = Math.floor(Math.random() * pool.length);
                const question = pool[randomIndex];
                quiz.push({ ...question, trait: trait, question: question.q });
            }
            return quiz.slice(0, NUM_PERSONALITY_QUESTIONS);
        }

        // ุงุฎุชูุงุฑ 12 ุณุคุงู ุนุดูุงุฆู ูู ูุฌููุนุฉ ุงูุฐูุงุก ุงููุจูุฑุฉ
        function generateIQQuiz() {
            // ุถูุงู ุนุฏู ุชูุฑุงุฑ ุงูุฃุณุฆูุฉ ุจุงุฎุชูุงุฑ 12 ุนุดูุงุฆูุงู ูู ุงููุฌููุนุฉ ุงููุจูุฑุฉ
            const shuffled = [...iqQuestionPool].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, NUM_IQ_QUESTIONS).map(q => ({
                ...q, 
                options: q.options.map(opt => opt.text) 
            }));
        }

        // ุชูููุฏ 12 ุณุคุงู ุฑูุงุถูุงุช ุนุดูุงุฆู
        function generateMathQuiz(count) {
            const quiz = [];
            for (let i = 0; i < count; i++) {
                const num1 = Math.floor(Math.random() * 50) + 10; 
                const num2 = Math.floor(Math.random() * 30) + 5; 
                let operation = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
                
                let q, answer;
                switch (operation) {
                    case '-':
                        q = `${Math.max(num1, num2)} - ${Math.min(num1, num2)} = ุ`;
                        answer = Math.max(num1, num2) - Math.min(num1, num2);
                        break;
                    case '*':
                        const n1 = Math.floor(Math.random() * 10) + 2; 
                        const n2 = Math.floor(Math.random() * 10) + 2; 
                        q = `${n1} ร ${n2} = ุ`;
                        answer = n1 * n2;
                        break;
                    case '/':
                        // ูุทุงู ุฃูุจุฑ ูููุชุงุฆุฌ ุงูุตุญูุญุฉ
                        let result = Math.floor(Math.random() * 8) + 3; 
                        let divisor = Math.floor(Math.random() * 8) + 2; 
                        let dividend = result * divisor;
                        q = `${dividend} รท ${divisor} = ุ`;
                        answer = result;
                        break;
                    case '+':
                    default:
                        q = `${num1} + ${num2} = ุ`;
                        answer = num1 + num2;
                        break;
                }

                quiz.push({ q, answer });
            }
            // ุงุฎุชูุงุฑ 12 ุณุคุงู ุนุดูุงุฆู ูุง ูุชูุฑุฑ ูู ุงููุฌููุนุฉ ุงููููููุฏุฉ
            return quiz.sort(() => 0.5 - Math.random()).slice(0, NUM_MATH_QUESTIONS); 
        }

        // ุจุฏุก ูุคูุช ุงูุฑูุงุถูุงุช
        function startMathTimer(duration) {
            appState.startTime = Date.now();
            let timeLeft = duration;
            elements.timeLeft.textContent = timeLeft;

            appState.timer = setInterval(() => {
                timeLeft--;
                elements.timeLeft.textContent = timeLeft;

                if (timeLeft <= 10) {
                     elements.timeLeft.classList.add('text-red-700', 'animate-pulse');
                } else {
                     elements.timeLeft.classList.remove('text-red-700', 'animate-pulse');
                }

                if (timeLeft <= 0) {
                    clearInterval(appState.timer);
                    calculateResult();
                }
            }, 1000);
        }

        // ุชุณุฌูู ุฅุฌุงุจุฉ ุงูุฎูุงุฑุงุช ุงููุชุนุฏุฏุฉ
        function selectOption(optionIndex) {
            appState.userAnswers[appState.currentQuestionIndex] = optionIndex;
            
            const options = elements.questionContainer.querySelectorAll('.quiz-option');
            options.forEach((opt, index) => {
                opt.classList.remove('selected');
                if (index === optionIndex) {
                    opt.classList.add('selected');
                }
            });

            elements.nextButton.disabled = false;
            updateProgressBar();
        }
        
        // ุงูุชุญูู ูู ุฅุฌุงุจุฉ ุงูุฑูุงุถูุงุช
        function checkMathAnswer() {
            const input = document.getElementById('math-answer');
            const answer = parseInt(input.value, 10);

            if (input.value.length > 0 && !isNaN(answer)) {
                appState.userAnswers[appState.currentQuestionIndex] = answer;
                elements.nextButton.disabled = false;
            } else {
                appState.userAnswers[appState.currentQuestionIndex] = undefined;
                elements.nextButton.disabled = true;
            }
        }

        // ===================================================================
        // 5. ูุธุงุฆู ุงูุชููู ุงูุฑุฆูุณูุฉ
        // ===================================================================
        
        function nextQuestion() {
            if (appState.mode !== 'math' && appState.userAnswers[appState.currentQuestionIndex] === undefined) {
                return;
            }
            if (appState.mode === 'math' && elements.nextButton.disabled) {
                return; 
            }

            if (appState.currentQuestionIndex < appState.currentQuizData.length - 1) {
                appState.currentQuestionIndex++;
                renderQuestion();
            } else {
                calculateResult();
            }
        }

        function previousQuestion() {
            if (appState.currentQuestionIndex > 0) {
                appState.currentQuestionIndex--;
                renderQuestion();
            }
        }

        function updateNavigationButtons() {
            if (appState.mode === 'math') {
                elements.prevButton.disabled = true;
                return;
            }
            
            elements.prevButton.disabled = appState.currentQuestionIndex === 0;

            elements.nextButton.textContent = appState.currentQuestionIndex === appState.currentQuizData.length - 1 ? 'ุนุฑุถ ุงููุชูุฌุฉ' : 'ุงูุชุงูู โ';
            elements.nextButton.disabled = appState.userAnswers[appState.currentQuestionIndex] === undefined;
        }

        function updateProgressBar() {
            const totalQuestions = appState.currentQuizData.length;
            
            let progressValue = appState.mode === 'math' 
                ? (appState.userAnswers.filter(a => a !== undefined).length / totalQuestions) * 100
                : ((appState.currentQuestionIndex + 1) / totalQuestions) * 100;
            
            elements.progressBar.style.width = `${progressValue}%`;
        }

        function updateQuestionCounter() {
            elements.questionCounter.textContent = `ุงูุณุคุงู ${appState.currentQuestionIndex + 1} ูู ${appState.currentQuizData.length}`;
        }


        // ===================================================================
        // 6. ุญุณุงุจ ูุนุฑุถ ุงููุชุงุฆุฌ
        // ===================================================================

        function calculateResult() {
            if (appState.timer) clearInterval(appState.timer);

            elements.quiz.classList.add('hidden');
            elements.result.classList.remove('hidden');
            elements.resultsSummary.innerHTML = ''; 
            elements.analysisOutput.innerHTML = ''; 
            elements.motivationalMessage.innerHTML = motivationalMessages[appState.mode][Math.floor(Math.random() * motivationalMessages[appState.mode].length)];
            
            // ุฅุฎูุงุก ููุทูุฉ Gemini ูุจุฏุฆูุงู ูุชุญุฏูุซูุง ุญุณุจ ุงููุถุน
            elements.geminiAnalysisArea.classList.add('hidden');
            elements.shareImageArea.classList.add('hidden'); 

            switch (appState.mode) {
                case 'personality':
                    calculatePersonalityResult();
                    elements.geminiAnalysisArea.classList.remove('hidden');
                    elements.shareImageArea.classList.remove('hidden');
                    appState.lastPersonalityFileName = 'ูุชูุฌุฉ_ุงุฎุชุจุงุฑ_ุงูุดุฎุตูุฉ.png';
                    drawPersonalityResultImage(); 
                    break;
                case 'iq':
                    calculateIqResult();
                    elements.geminiAnalysisArea.classList.remove('hidden'); 
                    elements.shareImageArea.classList.remove('hidden'); // ุฅุธูุงุฑ ุงูุตูุฑุฉ ููุง
                    appState.lastPersonalityFileName = 'ูุณุจุฉ_ุงูุฐูุงุก_ุงูุชูุฏูุฑูุฉ.png';
                    drawIqResultImage(); // ุฑุณู ุตูุฑุฉ IQ
                    break;
                case 'math':
                    calculateMathResult();
                    // ูุง ููุฌุฏ ุชุญููู Gemini/ุตูุฑุฉ ููุฑูุงุถูุงุช
                    break;
            }
        }

        function calculatePersonalityResult() {
            const scores = {}; 

            appState.currentQuizData.forEach((question, index) => {
                const answerIndex = appState.userAnswers[index];
                if (answerIndex !== undefined && question.options[answerIndex]) {
                    const trait = question.trait;
                    const points = question.options[answerIndex].points;

                    if (!scores[trait]) { scores[trait] = 0; }
                    scores[trait] += points;
                }
            });
            appState.personalityScores = scores; 

            const traitOrder = ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10'];
            elements.header.textContent = "ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ุงูุดุฎุตูุฉ ุงูููุตูุฉ";

            traitOrder.forEach(traitKey => {
                const score = scores[traitKey] || 0;
                const maxScore = 3; 
                const traitName = traitNames[traitKey];
                const description = traitDescriptions(score, traitName);

                const resultElement = document.createElement('div');
                resultElement.className = 'bg-white p-5 rounded-xl border border-gray-200 shadow-md';
                resultElement.innerHTML = `
                    <h3 class="text-xl font-bold mb-3 text-indigo-700">${traitName}</h3>
                    <div class="w-full h-3 bg-gray-200 rounded-full overflow-hidden">
                        <div style="width: ${Math.round((score / maxScore) * 100)}%;" class="bg-indigo-500 h-full transition-all duration-1000"></div>
                    </div>
                    <p class="text-sm text-gray-700 font-medium leading-loose mt-3">
                        ${description}
                    </p>
                    <p class="text-xs text-gray-400 mt-2">ุงูุฏุฑุฌุฉ ุงูููุชุณุจุฉ (ูู 3): ${score}</p>
                `;
                elements.resultsSummary.appendChild(resultElement);
            });
            // ุฅุนุฏุงุฏ ุฒุฑ ุงูุชุญููู ููุดุฎุตูุฉ
            elements.geminiAnalysisButton.textContent = 'ุชุญููู Gemini ุงููุชุนูู ููุดุฎุตูุฉ โจ';
            elements.geminiAnalysisButton.onclick = triggerGeminiAnalysisForPersonality;
        }

        function calculateIqResult() {
            let correctCount = 0;
            let timeTaken = (appState.iqEndTime - appState.startTime) / 1000;
            const totalQuestions = appState.currentQuizData.length;
            
            appState.currentQuizData.forEach((question, index) => {
                const answerIndex = appState.userAnswers[index];
                if (answerIndex !== undefined && question.options[answerIndex] == question.answer) {
                    correctCount++;
                }
            });

            // ุญุณุงุจ ูุณุจุฉ ุงูุฐูุงุก ุงูุชูุฏูุฑูุฉ (ุจูุงุกู ุนูู ูููุงุณ ุฎุทู ุจุณูุท ููููุถุญ)
            const correctPercentage = (correctCount / totalQuestions);
            // ุงููุฌุงู ุงูุชูุฏูุฑู: 80 (ูุฃุฏูู ูุชูุฌุฉ) ุฅูู 120 (ูุฃุนูู ูุชูุฌุฉ)
            let estimatedIQ = Math.round(80 + (correctPercentage * 40)); 
            
            // ุงูุชุฃูุฏ ูู ุฃู ุงููุชูุฌุฉ ุถูู ูุทุงู ูุนููู (ูุฏ ุชุชุฌุงูุฒ 120 ุจูููู ููู ูุซุจุชูุง)
            estimatedIQ = Math.min(125, Math.max(75, estimatedIQ)); 
            appState.lastIqScore = { estimatedIQ, correctCount, totalQuestions, timeTaken };

            elements.header.textContent = "ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ุงูุฐูุงุก (IQ)";

            const scoreElement = document.createElement('div');
            scoreElement.className = 'bg-purple-50 p-6 rounded-xl border border-purple-300 shadow-lg mb-6';
            scoreElement.innerHTML = `
                <p class="text-3xl font-extrabold text-purple-700 mb-2">ูุณุจุฉ ุงูุฐูุงุก ุงูุชูุฏูุฑูุฉ (IQ)</p>
                <p class="text-6xl font-extrabold text-purple-900 mb-4">${estimatedIQ}</p>
                <p class="text-xl font-semibold text-gray-700">ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ: ${correctCount} ูู ${totalQuestions}</p>
                <p class="text-sm text-gray-500 mt-2">ุฒูู ุงูุฅูุฌุงุฒ: ${timeTaken.toFixed(2)} ุซุงููุฉ</p>
            `;
            elements.resultsSummary.appendChild(scoreElement);
            
            const interpretation = document.createElement('p');
            interpretation.className = 'text-lg text-gray-600 leading-relaxed';
            
            let iqGrade;
            if (estimatedIQ >= 120) { iqGrade = "ุชูุงูููุง! ูุฏูู ูุฏุฑุฉ ุนูููุฉ ููุชุงุฒุฉ ุชุชุฌุงูุฒ ุงููุชูุณุท ุจุดูู ูุจูุฑ. ุงุณุชูุฑ ูู ุชุญุฏู ุนููู."; } 
            else if (estimatedIQ >= 110) { iqGrade = "ูุชูุฌุฉ ุฌูุฏุฉ ุฌุฏุงู. ุชุธูุฑ ูุฏุฑุงุชู ูู ููู ุงูุฃููุงุท ูุงูุชุญููู ููุชุงุฒุฉ."; } 
            else if (estimatedIQ >= 90) { iqGrade = "ูุชูุฌุฉ ูุชูุณุทุฉ. ูุฏูู ุฃุณุงุณ ุตูุจ ูู ุงููุฏุฑุงุช ุงููุนุฑููุฉ ูููู ุชุทููุฑู ุจุงุณุชูุฑุงุฑ."; } 
            else { iqGrade = "ุชุญุชุงุฌ ุฅูู ุงููุฒูุฏ ูู ุงูููุงุฑุณุฉ ูุงูุชุฑููุฒ. ุฑููุฒ ุนูู ุชุฏุฑูุจ ุนููู ุนูู ุฑุคูุฉ ุงูุนูุงูุงุช ุงูููุทููุฉ."; }
            
            interpretation.textContent = iqGrade;
            elements.resultsSummary.appendChild(interpretation);
            
            // ุญูุธ ุจูุงูุงุช ุงูุฃุฏุงุก ูุงุณุชุฎุฏุงู Gemini
            appState.iqPerformance = { correct: correctCount, total: totalQuestions, time: timeTaken };
            // ุฅุนุฏุงุฏ ุฒุฑ ุงูุชุญููู ููุฐูุงุก (ููุท ุงูุฃุฏุงุก ุงููุนุฑูู)
            elements.geminiAnalysisButton.textContent = 'ุชุญููู Gemini ูููุท ุฃุฏุงุฆู ุงููุนุฑูู โจ';
            elements.geminiAnalysisButton.onclick = triggerGeminiAnalysisForIQ;
        }

        function calculateMathResult() {
            let correctCount = 0;
            const timeElapsed = (Date.now() - appState.startTime) / 1000;
            
            appState.currentQuizData.forEach((question, index) => {
                const userAnswer = appState.userAnswers[index];
                if (userAnswer === question.answer) {
                    correctCount++;
                }
            });

            elements.header.textContent = "ูุชุงุฆุฌ ูุณุงุจูุฉ ุงูุณุฑุนุฉ ุงูุฐูููุฉ";
            const scoreElement = document.createElement('div');
            scoreElement.className = 'bg-teal-50 p-6 rounded-xl border border-teal-300 shadow-lg mb-6 text-center';
            scoreElement.innerHTML = `
                <p class="text-5xl font-extrabold text-teal-700 mb-2">${correctCount} / ${NUM_MATH_QUESTIONS}</p>
                <p class="text-xl font-semibold text-gray-700">ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ</p>
                <p class="text-sm text-gray-500 mt-2">ูู ${timeElapsed.toFixed(2)} ุซุงููุฉ</p>
            `;
            elements.resultsSummary.appendChild(scoreElement);

            const speedScore = Math.round(correctCount / (timeElapsed / 60)); 
            const interpretation = document.createElement('p');
            interpretation.className = 'text-lg text-gray-600 leading-relaxed';

            if (speedScore >= 20) {
                interpretation.textContent = `ูุนุฏู ุณุฑุนุฉ ููุชุงุฒ (${speedScore} ุฅุฌุงุจุฉ ุตุญูุญุฉ ูู ุงูุฏูููุฉ ุชูุฑูุจุงู)! ูุฏูู ูุฏุฑุฉ ุงุณุชุซูุงุฆูุฉ ุนูู ุงููุนุงูุฌุฉ ุงูุฐูููุฉ ุงูุณุฑูุนุฉ.`;
            } else if (speedScore >= 12) {
                interpretation.textContent = `ูุนุฏู ุณุฑุนุฉ ุฌูุฏ ุฌุฏุงู (${speedScore} ุฅุฌุงุจุฉ ุตุญูุญุฉ ูู ุงูุฏูููุฉ ุชูุฑูุจุงู). ุงุณุชูุฑ ูู ุงูุชุฏุฑุจ ูุฒูุงุฏุฉ ุงูุฏูุฉ ูุงูุณุฑุนุฉ.`;
            } else {
                interpretation.textContent = `ูุนุฏู ุณุฑุนุฉ ุฌูุฏ (${speedScore} ุฅุฌุงุจุฉ ุตุญูุญุฉ ูู ุงูุฏูููุฉ ุชูุฑูุจุงู). ููููู ุชุญุณูู ูุฐุง ุงููุนุฏู ุจุงูุชุฏุฑูุจ ุงูููุชุธู ุนูู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุงูุจุณูุทุฉ.`;
            }
            elements.resultsSummary.appendChild(interpretation);
        }
        
        // ===================================================================
        // 7. ููุฒุฉ ุชุญููู Gemini
        // ===================================================================

        async function triggerGeminiAnalysisForPersonality() {
            elements.geminiAnalysisButton.disabled = true;
            elements.geminiAnalysisButton.innerHTML = `<span class="loading-spinner block mx-auto"></span> ุฌุงุฑู ุชุญููู ุงูุดุฎุตูุฉ...`;
            elements.analysisOutput.innerHTML = `<p class="text-center text-blue-600 font-semibold">ูููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุจุชุญููู ุณูุงุชู ุงูุนุดุฑุฉ...</p>`;

            const scores = appState.personalityScores;
            const scoreSummary = Object.keys(scores).map(key => {
                const score = scores[key];
                const traitName = traitNames[key];
                let poleA = traitName.split('/')[0];
                let poleB = traitName.split('/')[1];

                const scoreDesc = score === 0 ? `ููู ููู ูุญู ${poleB}` : 
                                score === 1 ? `ููู ูุญู ${poleB}` : 
                                score === 2 ? `ููู ูุญู ${poleA}` : 
                                `ููู ููู ูุญู ${poleA}`;
                
                return `${traitName}: ${score}/3 (${scoreDesc})`;
            }).join('ุ ู ');

            const userQuery = `ุฅููู ุฏุฑุฌุงุช ุงููุณุชุฎุฏู ุงูููุงุฆูุฉ ูู ุณูุงุช ุงูุดุฎุตูุฉ ุงูุนุดุฑุฉ: ${scoreSummary}. ุจูุงุกู ุนูู ูุฐู ุงูุฏุฑุฌุงุชุ ูุฏู ุชุญูููู ุงููุชุนูู.`;
            const systemPrompt = "ุฃูุช ูุญูู ุดุฎุตูุฉ ูุนุงูู ููุณ ูุญุชุฑู. ูููุชู ูู ูุฑุงุกุฉ ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ุณูุงุช ุงูุดุฎุตูุฉ ุงูุนุดุฑุฉ ูููุณุชุฎุฏู (ุงููุชูุฌุฉ ูู 3 ููู ุณูุฉุ ุญูุซ 3 ุชุนูู ููู ููู ูุญู ุงููุทุจ ุงูุฃูู ู 0 ููู ููู ูุญู ุงููุทุจ ุงูุซุงูู). ูู ุจุชูุฏูู ุชุญููู ูุชุนูู ููุญูุฒ ูู ุซูุงุซ ููุฑุงุช: ุงูุฃููู ุชุตู ููุงุท ุงูููุฉ ูุงูุณูุงุช ุงูุจุงุฑุฒุฉ ุงููุงุชุฌุฉ ุนู ุชูุงุฒู ุฃู ุชุจุงูู ุงูุณูุงุชุ ูุงูุซุงููุฉ ุชูุงูุด ุงูุชุญุฏูุงุช ุงููุญุชููุฉ ูู ุชุจุงูู ุงูุณูุงุชุ ูุงูุซุงูุซุฉ ุชูุฏู ูุตุงุฆุญ ูุญุฏุฏุฉ ููุชูููุฉ ุงูุดุฎุตูุฉ ูุงูููููุฉ. ุงุณุชุฎุฏู ุงููุบุฉ ุงูุนุฑุจูุฉ ุงููุตุญู.";

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };
            
            try {
                const response = await fetchWithRetry(`${API_URL}?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const analysisText = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (analysisText) {
                    const formattedText = analysisText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                                                    .replace(/\n/g, '<br><br>');

                    elements.analysisOutput.innerHTML = formattedText;
                } else {
                    elements.analysisOutput.innerHTML = `<p class="text-red-600">ุนุฐุฑุงูุ ูู ูุชููู ูู ุงูุญุตูู ุนูู ุชุญููู ูุชุนูู. ูุฏ ุชููู ููุงู ูุดููุฉ ูู ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู. ูุฑุฌู ุงููุญุงููุฉ ูุงุญูุงู.</p>`;
                }
            } catch (error) {
                console.error("Gemini API Error:", error);
                elements.analysisOutput.innerHTML = `<p class="text-red-600">ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู (Gemini). <br> ูุฏ ุชููู ุงููุดููุฉ ูุคูุชุฉ ุฃู ูุชุนููุฉ ุจุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ. ูุฑุฌู ุฅุนุงุฏุฉ ุงููุญุงููุฉ.</p>`;
            } finally {
                elements.geminiAnalysisButton.disabled = false;
                elements.geminiAnalysisButton.innerHTML = `ุชุญููู Gemini ุงููุชุนูู ููุดุฎุตูุฉ โจ`;
            }
        }

        async function triggerGeminiAnalysisForIQ() {
            elements.geminiAnalysisButton.disabled = true;
            elements.geminiAnalysisButton.innerHTML = `<span class="loading-spinner block mx-auto"></span> ุฌุงุฑู ุชุญููู ููุท ุงูุฃุฏุงุก...`;
            elements.analysisOutput.innerHTML = `<p class="text-center text-blue-600 font-semibold">ูููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุจุชุญููู ุฃุณููุจ ุชูููุฑู ุจูุงุกู ุนูู ุงูุณุฑุนุฉ ูุงูุฏูุฉ...</p>`;

            const { correct, total, time } = appState.iqPerformance;
            const unanswered = total - appState.userAnswers.filter(a => a !== undefined).length;
            const errors = total - correct - unanswered;

            const userQuery = `ุฃููู ุงููุณุชุฎุฏู ุงุฎุชุจุงุฑ ุฐูุงุก (IQ) ูู ${total} ุณุคุงู ูู ${time.toFixed(2)} ุซุงููุฉ. 
            ุนุฏุฏ ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ: ${correct}. 
            ุนุฏุฏ ุงูุฃุณุฆูุฉ ุงูุฎุงุทุฆุฉ: ${errors}. 
            ุนุฏุฏ ุงูุฃุณุฆูุฉ ุบูุฑ ุงููุฌุงุจุฉ: ${unanswered}. 
            ุจูุงุกู ุนูู ูุฐู ุงูุจูุงูุงุชุ ูู ุจุชุญููู ููุท ุดุฎุตูุชู ุงููุนุฑูู ูู ููุฑุชูู ูุฑูุฒุชูู ุจุงููุบุฉ ุงูุนุฑุจูุฉ.`;

            const systemPrompt = "ุฃูุช ูุญูู ููุณู ูุนุฑูู. ูููุชู ูู ุชุญููู ููุท ุชูููุฑ ุงููุณุชุฎุฏู ุจูุงุกู ุนูู ุฃุฏุงุฆู ูู ุงุฎุชุจุงุฑ ุงูุฐูุงุก. ุงุณุชุฎุฏู ุงูุจูุงูุงุช (ุงูุณุฑุนุฉุ ุงูุฏูุฉุ ุงูุฃุณุฆูุฉ ุบูุฑ ุงููุฌุงุจุฉ). ูุฏู ููุฑุชูู: ุงูุฃููู ุชุตู ุงูููุงูุญ ุงููุนุฑููุฉ ูุดุฎุตูุชู (ูู ูู ุฏููู ููุชุฑุฏุฏุ ุณุฑูุน ููุฌุงุฒูุ ููุธู ููุชุญูุธุ ุฅูุฎ) ูุน ููุงุท ุงูููุฉ ุงููุฑุชุจุทุฉ ุจูุฐุง ุงูููุท. ูุงูุซุงููุฉ ุชูุฏู ูุตูุญุฉ ุญูู ููููุฉ ุชุญููู ุงูุชูุงุฒู ุจูู ุงูุณุฑุนุฉ ูุงูุฏูุฉ ูุชุญุณูู ุงูุฃุฏุงุก ุงูุนููู ูู ุงูููุงูู ุงูุญููููุฉ.";

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };
            
            try {
                const response = await fetchWithRetry(`${API_URL}?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const analysisText = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (analysisText) {
                    const formattedText = analysisText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                                                    .replace(/\n/g, '<br><br>');

                    elements.analysisOutput.innerHTML = formattedText;
                } else {
                    elements.analysisOutput.innerHTML = `<p class="text-red-600">ุนุฐุฑุงูุ ูู ูุชููู ูู ุงูุญุตูู ุนูู ุชุญููู ุงูุฃุฏุงุก. ูุฏ ุชููู ููุงู ูุดููุฉ ูู ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู. ูุฑุฌู ุงููุญุงููุฉ ูุงุญูุงู.</p>`;
                }
            } catch (error) {
                console.error("Gemini API Error:", error);
                 elements.analysisOutput.innerHTML = `<p class="text-red-600">ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู (Gemini). <br> ูุฏ ุชููู ุงููุดููุฉ ูุคูุชุฉ ุฃู ูุชุนููุฉ ุจุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ. ูุฑุฌู ุฅุนุงุฏุฉ ุงููุญุงููุฉ.</p>`;
            } finally {
                elements.geminiAnalysisButton.disabled = false;
                elements.geminiAnalysisButton.innerHTML = `ุชุญููู Gemini ูููุท ุฃุฏุงุฆู ุงููุนุฑูู โจ`;
            }
        }

        // ===================================================================
        // 8. ููุฒุฉ ุชุตููุฑ ุงููุชูุฌุฉ (Canvas)
        // ===================================================================

        // ุฑุณู ูุชูุฌุฉ ุงุฎุชุจุงุฑ ุงูุดุฎุตูุฉ
        function drawPersonalityResultImage() {
            const canvas = elements.resultCanvas;
            const ctx = canvas.getContext('2d');
            const W = canvas.width;
            const H = canvas.height;
            const scores = appState.personalityScores;
            const traitOrder = ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10'];

            // 1. ุงูุฎูููุฉ
            ctx.fillStyle = '#eff6ff'; 
            ctx.fillRect(0, 0, W, H);

            // 2. ุงูุนููุงู ุงูุฑุฆูุณู
            ctx.font = 'bold 30px Cairo';
            ctx.fillStyle = '#1e3a8a'; 
            ctx.textAlign = 'center';
            ctx.fillText('ุชุญููู ุงูุดุฎุตูุฉ ุงููุฎุตุต', W / 2, 40);

            // 3. ุงูุฎุท ุงููุงุตู
            ctx.fillStyle = '#60a5fa'; 
            ctx.fillRect(W / 2 - 150, 55, 300, 3);

            // 4. ุฑุณู ุดุฑูุท ุงููุชุงุฆุฌ
            const barHeight = 15;
            const startY = 90;
            const margin = 30;
            const barWidth = W - 2 * margin - 150; 

            traitOrder.forEach((traitKey, index) => {
                const score = scores[traitKey] || 0;
                const maxScore = 3;
                const percentage = (score / maxScore);
                const currentY = startY + index * 30;
                const traitName = traitNames[traitKey];

                // ุงุณู ุงูุณูุฉ (ุงููููู)
                ctx.font = 'bold 14px Cairo';
                ctx.fillStyle = '#4b5563'; 
                ctx.textAlign = 'right';
                ctx.fillText(traitName.split('/')[0], W - margin, currentY);

                // ุงุณู ุงูุณูุฉ (ุงููุณุงุฑ)
                ctx.textAlign = 'left';
                ctx.fillText(traitName.split('/')[1], margin, currentY);

                // ุฑุณู ุงูุดุฑูุท
                ctx.fillStyle = '#d1d5db'; 
                ctx.fillRect(W / 2 - barWidth / 2, currentY + 5, barWidth, barHeight);

                // ุฑุณู ุงูุชูุฏู (ูุญู ุงููุทุจ ุงูุฃูู - Blue-500)
                const blueWidth = barWidth * percentage;
                ctx.fillStyle = '#3b82f6'; 
                ctx.fillRect(W / 2 - barWidth / 2, currentY + 5, blueWidth, barHeight);
            });

            // 5. ุงููุต ุงูุฎุชุงูู ูุงูุดุนุงุฑ (ุงููุณุงุฑ ุฃุณูู)
            ctx.font = '12px Cairo';
            ctx.fillStyle = '#9ca3af'; 
            ctx.textAlign = 'left';
            ctx.fillText('ุชู ุงูุชุญููู ุจูุงุณุทุฉ ููุตุฉ ุงูุงุฎุชุจุงุฑุงุช ุงูุฐูููุฉ', margin, H - 20);
        }

        // ุฑุณู ูุชูุฌุฉ ุงุฎุชุจุงุฑ ุงูุฐูุงุก
        function drawIqResultImage() {
            const canvas = elements.resultCanvas;
            const ctx = canvas.getContext('2d');
            const W = canvas.width;
            const H = canvas.height;
            const { estimatedIQ, correctCount, totalQuestions, timeTaken } = appState.lastIqScore;
            
            // 1. ุงูุฎูููุฉ
            ctx.fillStyle = '#f3e8ff'; // ุจููุณุฌู ูุงุชุญ (Purple-50)
            ctx.fillRect(0, 0, W, H);

            // 2. ุงูุนููุงู ุงูุฑุฆูุณู
            ctx.font = 'bold 30px Cairo';
            ctx.fillStyle = '#5b21b6'; // ุจููุณุฌู ุฏุงูู (Violet-700)
            ctx.textAlign = 'center';
            ctx.fillText('ูุณุจุฉ ุงูุฐูุงุก (IQ) ุงูุชูุฏูุฑูุฉ', W / 2, 50);

            // 3. ุงููุชูุฌุฉ ุงููุจูุฑุฉ (ุงูู IQ)
            ctx.font = 'bold 150px Cairo';
            ctx.fillStyle = '#7c3aed'; // ุจููุณุฌู ูุชูุณุท
            ctx.fillText(estimatedIQ, W / 2, H / 2 + 30);
            
            // 4. ูุคุดุฑ ุงูุฏูุฉ ูุงูุณุฑุนุฉ (ุฃุณูู ุงููุชูุฌุฉ)
            ctx.font = 'bold 20px Cairo';
            ctx.fillStyle = '#5b21b6';
            ctx.fillText(`ุฅุฌุงุจุงุช ุตุญูุญุฉ: ${correctCount} ูู ${totalQuestions}`, W / 2, H / 2 + 100);

            ctx.font = 'bold 16px Cairo';
            ctx.fillStyle = '#9333ea'; // ุจููุณุฌู ุฃูุชุญ
            ctx.fillText(`ุฒูู ุงูุฅูุฌุงุฒ: ${timeTaken.toFixed(2)} ุซุงููุฉ`, W / 2, H / 2 + 135);


            // 5. ุงููุต ุงูุฎุชุงูู (ุฃุณูู)
            ctx.font = '12px Cairo';
            ctx.fillStyle = '#9ca3af'; 
            ctx.textAlign = 'left';
            ctx.fillText('ุชู ุงูุชูููู ุจูุงุณุทุฉ ููุตุฉ ุงูุงุฎุชุจุงุฑุงุช ุงูุฐูููุฉ', margin, H - 20);
        }

        // ูุธููุฉ ุงูุชุญููู ุงูุนุงูุฉ (ุชุนุชูุฏ ุนูู ุขุฎุฑ ุงุฎุชุจุงุฑ ุชู ุฅุฌุฑุงุคู)
        function downloadResultImage() {
            const canvas = elements.resultCanvas;
            const dataURL = canvas.toDataURL('image/png');
            
            const a = document.createElement('a');
            a.href = dataURL;
            a.download = appState.lastPersonalityFileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            alert('ุชู ุชุญููู ุตูุฑุฉ ุงููุชูุฌุฉ ุจูุฌุงุญ!');
        }
        
        // ุงูุจุฏุก ุจุนุฑุถ ุดุงุดุฉ ุงูุงุฎุชูุงุฑ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.onload = showSelectionScreen;

    </script>
</body>
</html>
